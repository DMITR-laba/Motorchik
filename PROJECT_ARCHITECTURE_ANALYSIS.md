# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ Motorchik

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-11-16  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 1.0.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
4. [–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker)](#–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-docker)
5. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–æ–±—Ä–∞–±–æ—Ç–∫–∏-–∑–∞–ø—Ä–æ—Å–æ–≤)
6. [–°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ](#—Å–µ—Ä–≤–∏—Å—ã-–∏-–∏—Ö-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
7. [–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞](#–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö-–∏-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞)
8. [–¶–µ–ø–æ—á–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤](#—Ü–µ–ø–æ—á–∫–∏-–æ–±—Ä–∞–±–æ—Ç–∫–∏-–∑–∞–ø—Ä–æ—Å–æ–≤)
9. [–ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö](#–ø–æ—Ç–æ–∫–∏-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**Motorchik** - —ç—Ç–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- RAG (Retrieval-Augmented Generation) –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- SQL-–∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ (Mem0 + Qdrant)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ LangGraph
- –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (FlashrankRerank)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- **Backend:** FastAPI (Python 3.11)
- **Frontend:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML/JS
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL —Å pgvector
- **–ü–æ–∏—Å–∫:** Elasticsearch 8.11.0
- **–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:** Qdrant
- **–ö—ç—à/–°–æ—Å—Ç–æ—è–Ω–∏–µ:** Redis
- **AI –º–æ–¥–µ–ª–∏:** Ollama (–ª–æ–∫–∞–ª—å–Ω–æ), Mistral, OpenAI, Anthropic
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:** Docker Compose

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
–ß–∞—Ç-–ø–æ–º–æ—â–Ω–∏–∫ ‚Äî –∫–æ–ø–∏—è/
‚îú‚îÄ‚îÄ backend/                    # Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # API endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.py        # –ß–∞—Ç API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai.py          # AI endpoints (SQL-–∞–≥–µ–Ω—Ç, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cars.py        # API –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_es.py   # Elasticsearch –ø–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents.py   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py       # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ config.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_service.py     # RAG —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sql_agent_service.py  # SQL-–∞–≥–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database_service.py   # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ elasticsearch_service.py  # Elasticsearch
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vector_search_service.py  # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogue_history_service.py  # –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mem0_service.py    # –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ langgraph_rag_service.py  # LangGraph –¥–ª—è RAG
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (30+ —Å–µ—Ä–≤–∏—Å–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ models/                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py         # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt        # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ frontend/                   # Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ nginx/                      # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ ...
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (backend/requirements.txt)

#### Web Framework
- `fastapi>=0.104.1` - Web framework
- `uvicorn[standard]>=0.24.0` - ASGI —Å–µ—Ä–≤–µ—Ä
- `python-multipart>=0.0.6` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multipart —Ñ–æ—Ä–º

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `sqlalchemy>=2.0.23` - ORM
- `psycopg2-binary>=2.9.9` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- `psycopg[binary]>=3.1.0` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
- `alembic>=1.12.1` - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- `pgvector>=0.2.3` - –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL

#### AI –∏ ML
- `langchain>=0.1.0` - LangChain framework
- `langchain-community>=0.0.20` - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `langchain-core>=0.1.0` - –Ø–¥—Ä–æ LangChain
- `langchain-ollama>=0.1.0` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama
- `langchain-mistralai>=0.1.0` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mistral
- `langchain-openai>=0.1.0` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI
- `langchain-anthropic>=0.1.0` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Anthropic
- `langchain-postgres>=0.0.3` - PostgreSQL –¥–ª—è LangChain
- `langgraph>=0.0.20` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ—ã
- `openai>=0.28.1` - OpenAI API
- `sentence-transformers>=2.2.2` - –≠–º–±–µ–¥–¥–∏–Ω–≥–∏
- `torch>=2.0.0` - PyTorch –¥–ª—è ML
- `flashrank>=0.1.0` - –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `mem0ai>=1.0.0` - –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å

#### –ü–æ–∏—Å–∫ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- `elasticsearch==8.11.0` - Elasticsearch –∫–ª–∏–µ–Ω—Ç
- `chromadb>=0.4.18` - ChromaDB (–æ—Ç–∫–ª—é—á–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pgvector)

#### –ö—ç—à –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `redis>=5.0.1` - Redis –∫–ª–∏–µ–Ω—Ç

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `PyPDF2>=3.0.1` - PDF –ø–∞—Ä—Å–∏–Ω–≥
- `python-docx>=0.8.11` - Word –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `beautifulsoup4>=4.12.0` - HTML –ø–∞—Ä—Å–∏–Ω–≥

#### –£—Ç–∏–ª–∏—Ç—ã
- `pydantic>=2.5.0` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `pydantic-settings>=2.1.0` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `httpx>=0.25.2` - HTTP –∫–ª–∏–µ–Ω—Ç
- `python-dotenv>=1.0.0` - –ó–∞–≥—Ä—É–∑–∫–∞ .env
- `numpy>=1.24.0,<2.0.0` - –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- `python-jose[cryptography]>=3.3.0` - JWT —Ç–æ–∫–µ–Ω—ã
- `passlib[bcrypt]>=1.7.4` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `transliterate>=1.10.2` - –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
- `unidecode>=1.3.7` - Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

---

## üê≥ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker)

### –°–µ—Ä–≤–∏—Å—ã Docker Compose

#### 1. motorchik-postgres
- **–û–±—Ä–∞–∑:** `ankane/pgvector:latest`
- **–ü–æ—Ä—Ç:** 5432
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** PostgreSQL —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π pgvector –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **Volume:** `motorchik_postgres_data`
- **Healthcheck:** `pg_isready -U postgres`

#### 2. motorchik-elasticsearch
- **–û–±—Ä–∞–∑:** `docker.elastic.co/elasticsearch/elasticsearch:8.11.0`
- **–ü–æ—Ä—Ç—ã:** 9200 (HTTP), 9300 (gRPC)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º
- **Volume:** `motorchik_elasticsearch_data`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –°–∏–Ω–æ–Ω–∏–º—ã –∏–∑ `backend/elasticsearch/synonyms.txt`

#### 3. motorchik-qdrant
- **–û–±—Ä–∞–∑:** `qdrant/qdrant:latest`
- **–ü–æ—Ä—Ç—ã:** 6333 (HTTP API), 6334 (gRPC API)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è Mem0 (–¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å)
- **Volume:** `motorchik_qdrant_data`
- **Healthcheck:** `curl -f http://localhost:6333/`

#### 4. motorchik-backend
- **–°–±–æ—Ä–∫–∞:** `./backend/Dockerfile`
- **–ü–æ—Ä—Ç:** 8000 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, —á–µ—Ä–µ–∑ nginx)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** postgres, elasticsearch, qdrant
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
  - `DATABASE_URL` - PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
  - `ELASTICSEARCH_HOST/PORT` - Elasticsearch
  - `OLLAMA_HOST/PORT` - Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π)
  - `QDRANT_URL` - Qdrant –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
  - `MEM0_USE_QDRANT=true` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Qdrant –¥–ª—è Mem0

#### 5. motorchik-frontend
- **–°–±–æ—Ä–∫–∞:** `./frontend/Dockerfile`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π frontend

#### 6. nginx
- **–°–±–æ—Ä–∫–∞:** `./nginx/Dockerfile`
- **–ü–æ—Ä—Ç—ã:** 80 (HTTP), 443 (HTTPS)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Reverse proxy, SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** backend, frontend

#### 7. certbot
- **–û–±—Ä–∞–∑:** `certbot/certbot`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

---

## üì° API Endpoints

### –ß–∞—Ç API (`/api/chat`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| POST | `/api/chat/message` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç AI | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/chat/feedback` | –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –Ω–∞ –æ—Ç–≤–µ—Ç | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/chat/history` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/chat/new_chat` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/chat/chats` | –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/chat/chats` | –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/chat/chats/{chat_id}/messages` | –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| PUT | `/api/chat/chats/{chat_id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/chat/chats/{chat_id}` | –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |

### AI API (`/api/ai`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| POST | `/api/ai/test-connection` | –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ AI —Å–µ—Ä–≤–∏—Å—É | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/ollama/models` | –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π Ollama | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/ollama/pull` | –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ Ollama | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/ollama/status` | –°—Ç–∞—Ç—É—Å Ollama | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/settings/save` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ AI | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/settings` | –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ AI | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/test-model` | –¢–µ—Å—Ç –º–æ–¥–µ–ª–∏ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/sql-agent/status` | –°—Ç–∞—Ç—É—Å SQL-–∞–≥–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/sql-agent/settings/fallback` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ fallback SQL-–∞–≥–µ–Ω—Ç–∞ | Admin |
| POST | `/api/ai/sql-agent/toggle` | –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ SQL-–∞–≥–µ–Ω—Ç–∞ | Admin |
| POST | `/api/ai/sql-agent/query` | –ó–∞–ø—Ä–æ—Å –∫ SQL-–∞–≥–µ–Ω—Ç—É | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/sql-agent/schema` | –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | Admin |
| GET | `/api/ai/orchestrator/models` | –ú–æ–¥–µ–ª–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/orchestrator/select` | –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/orchestrator/bulk-update` | –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/orchestrator/performance` | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/orchestrator/reload-config` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/orchestrator/load-model` | –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/interpret-query` | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/intelligent-search` | –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/recommendations` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/car-dealer/query` | –ó–∞–ø—Ä–æ—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/ai/finance/calculate` | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/dialogue/history` | –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/ai/dialogue/history` | –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/dialogue/visualization` | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/ai/quality/metrics` | –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/ai/quality/metrics` | –£–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ API (`/api/cars`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/cars/` | –°–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/{car_id}` | –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/{car_id}/pictures` | –§–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/{car_id}/options` | –û–ø—Ü–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/{car_id}/options-groups` | –ì—Ä—É–ø–ø—ã –æ–ø—Ü–∏–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/used/` | –°–ø–∏—Å–æ–∫ –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/used/{used_car_id}` | –î–µ—Ç–∞–ª–∏ –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/cars/used/{used_car_id}/pictures` | –§–æ—Ç–æ –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ü–æ–∏—Å–∫ API (`/api/search`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/search/cars` | –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —á–µ—Ä–µ–∑ Elasticsearch | –ü—É–±–ª–∏—á–Ω—ã–π |

### –î–æ–∫—É–º–µ–Ω—Ç—ã API (`/api/documents`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/documents/` | –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/documents/{document_id}` | –î–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/upload` | –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| PUT | `/api/documents/{document_id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/documents/{document_id}` | –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/{document_id}/process` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/documents/{document_id}/download` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/documents/{document_id}/text` | –¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/batch-process` | –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/{document_id}/generate-categories` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/{document_id}/generate-tags` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/documents/{document_id}/generate-meta` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ß–∞–Ω–∫–∏ API (`/api/chunks`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/chunks/document/{document_id}` | –ß–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/chunks/document/{document_id}/create` | –°–æ–∑–¥–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/chunks/search` | –ü–æ–∏—Å–∫ –ø–æ —á–∞–Ω–∫–∞–º | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ API (`/api/admin`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/admin/articles` | –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π | Admin |
| GET | `/api/admin/articles/{article_id}` | –î–µ—Ç–∞–ª–∏ —Å—Ç–∞—Ç—å–∏ | Admin |
| POST | `/api/admin/articles` | –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ | Admin |
| PUT | `/api/admin/articles/{article_id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ | Admin |
| DELETE | `/api/admin/articles/{article_id}` | –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ | Admin |
| GET | `/api/admin/categories` | –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π | Admin |
| POST | `/api/admin/categories` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ | Admin |
| GET | `/api/admin/tags` | –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ | Admin |
| POST | `/api/admin/tags` | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ | Admin |
| POST | `/api/admin/import` | –ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–µ–π | Admin |
| POST | `/api/admin/reindex` | –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è Elasticsearch | Admin |
| POST | `/api/admin/articles/{article_id}/generate_meta` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö | Admin |
| GET | `/api/admin/cars` | –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | Admin |
| GET | `/api/admin/cars/used` | –°–ø–∏—Å–æ–∫ –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã—Ö | Admin |
| GET | `/api/admin/cars/options` | –°–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–π | Admin |
| GET | `/api/admin/cars/options-groups` | –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –æ–ø—Ü–∏–π | Admin |

### –ò–º–ø–æ—Ä—Ç API (`/api/import`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| POST | `/api/import/upload` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/import/save` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/import/list` | –°–ø–∏—Å–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/import/migrate` | –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/import/delete` | –£–¥–∞–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ü–∞—Ä—Å–µ—Ä API (`/api/parser`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| POST | `/api/parser/start` | –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/parser/stop` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/parser/status` | –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/parser/cars` | –°–ø–∏—Å–æ–∫ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/parser/cars/{car_id}` | –î–µ—Ç–∞–ª–∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| DELETE | `/api/parser/cars/{car_id}` | –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/parser/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ì–æ–ª–æ—Å–æ–≤–æ–π API (`/api/voice`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/voice/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ API | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/voice/settings` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/voice/transcribe` | –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ | –ü—É–±–ª–∏—á–Ω—ã–π |

### –î–æ–º–µ–Ω–Ω—ã–π API (`/api/domain`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| GET | `/api/domain/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/domain/settings` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–æ–º–µ–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/domain/test` | –¢–µ—Å—Ç –¥–æ–º–µ–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/domain/reload-nginx` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx | –ü—É–±–ª–∏—á–Ω—ã–π |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API (`/api/auth`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|-------|----------|----------|-------------|
| POST | `/api/auth/token` | –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –ü—É–±–ª–∏—á–Ω—ã–π |
| POST | `/api/auth/bootstrap-admin` | –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞ | –ü—É–±–ª–∏—á–Ω—ã–π |
| GET | `/api/auth/me` | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –¢—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω |
| GET | `/api/auth/users` | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | Admin |
| POST | `/api/auth/users` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | Admin |
| PUT | `/api/auth/users/{user_id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | Admin |
| DELETE | `/api/auth/users/{user_id}` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | Admin |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±—â–∞—è —Å—Ö–µ–º–∞

```
–ö–ª–∏–µ–Ω—Ç
  ‚Üì
Nginx (80/443)
  ‚Üì
FastAPI (8000)
  ‚Üì
API Router (chat.py, ai.py, etc.)
  ‚Üì
Service Layer (RAG, SQL Agent, etc.)
  ‚Üì
Data Layer (PostgreSQL, Elasticsearch, Qdrant, Redis)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

#### 1. `/api/chat/message` (POST)
**–§–∞–π–ª:** `backend/app/api/chat.py`

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ `ChatMessageRequest`
2. –°–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL-–∞–≥–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç)
4. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ `sources_data`
5. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –∏–∑ Redis
6. –í—ã–±–æ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:
   - **LangGraph RAG** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
   - **–û–±—ã—á–Ω—ã–π RAG** (fallback)
7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ RAG
8. –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
9. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏ Redis
10. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞

#### 2. `/api/ai/sql-agent/query` (POST)
**–§–∞–π–ª:** `backend/app/api/ai.py`

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–Ω–æ—Å—Ç–∏ SQL-–∞–≥–µ–Ω—Ç–∞
2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `SQLAgentService`
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–∞
5. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
6. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
7. Fallback –Ω–∞ Elasticsearch (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
8. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞

#### 3. `/api/ai/car-dealer/query` (POST)
**–§–∞–π–ª:** `backend/app/api/ai.py`

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `CarDealerAssistantService`
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
3. –í–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

---

## üîß –°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

#### 1. RAGService (`rag_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RAG

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `DatabaseService` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- `DocumentService` - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- `ElasticsearchService` - –ø–æ–∏—Å–∫ –≤ Elasticsearch
- `DialogueHistoryService` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
- `FlashrankRerank` - –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–µ—Ç–æ–¥—ã:**
- `generate_response()` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- `_rerank_documents()` - –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π
- `_rerank_document_objects()` - –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `_create_prompt()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è LLM
- `_build_context()` - —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
3. –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏–∑ Mem0
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

#### 2. SQLAgentService (`sql_agent_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `DatabaseService` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
- `ElasticsearchService` - fallback –ø–æ–∏—Å–∫
- `DialogStateService` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞

**–ú–µ—Ç–æ–¥—ã:**
- `process_question()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
- `execute_sql_query()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
- `_generate_sql()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL —á–µ—Ä–µ–∑ LLM

**–ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã:**
1. –ê–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ LLM
3. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. Fallback –Ω–∞ Elasticsearch –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

#### 3. DialogueHistoryService (`dialogue_history_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `Mem0Service` - –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
- Redis - –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–ú–µ—Ç–æ–¥—ã:**
- `add_message()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `get_recent_context()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `get_relevant_memories()` - –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `_get_relevant_history_semantic()` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏

**–•—Ä–∞–Ω–∏–ª–∏—â–∞:**
- **Redis:** –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π)
- **Mem0 + Qdrant:** –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è)

#### 4. Mem0Service (`mem0_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å —á–µ—Ä–µ–∑ Mem0

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `mem0ai` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Mem0
- Qdrant - –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–ú–µ—Ç–æ–¥—ã:**
- `add_memory()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `search_memories()` - –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `get_all_memories()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `format_memories_for_context()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- **Qdrant:** –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **In-memory:** Fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Qdrant

#### 5. LangGraphRAGService (`langgraph_rag_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º RAG —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `RAGService` - –æ—Å–Ω–æ–≤–Ω–æ–π RAG —Å–µ—Ä–≤–∏—Å
- `langgraph` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–ì—Ä–∞—Ñ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```
retrieve_memories ‚Üí retrieve_docs ‚Üí generate ‚Üí save_memory ‚Üí END
```

**–ú–µ—Ç–æ–¥—ã:**
- `generate_with_graph()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –≥—Ä–∞—Ñ
- `_retrieve_memories_node()` - —É–∑–µ–ª –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `_retrieve_docs_node()` - —É–∑–µ–ª –ø–æ–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `_generate_node()` - —É–∑–µ–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- `_save_memory_node()` - —É–∑–µ–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç—å

#### 6. VectorSearchService (`vector_search_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ pgvector

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- PostgreSQL —Å pgvector
- LangChain PGVector

**–ú–µ—Ç–æ–¥—ã:**
- `similarity_search()` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 7. ElasticsearchService (`elasticsearch_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- Elasticsearch 8.11.0

**–ú–µ—Ç–æ–¥—ã:**
- `search_cars()` - –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### 8. DatabaseService (`database_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —Å PostgreSQL

**–ú–µ—Ç–æ–¥—ã:**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- `search_articles_for_rag()` - –ø–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π
- `search_cars_for_rag()` - –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `get_cars_statistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üíæ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### 1. PostgreSQL (—Å pgvector)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
- –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏, —Å—Ç–∞—Ç—å–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —á–∞—Ç—ã)

**–¢–∞–±–ª–∏—Ü—ã:**
- `cars` - –Ω–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- `used_cars` - –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- `articles` - —Å—Ç–∞—Ç—å–∏
- `documents` - –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `document_chunks` - —á–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `chats` - —á–∞—Ç—ã
- `chat_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `langchain_pg_embedding` - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏

**–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
- `pgvector` - –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫

### 2. Elasticsearch

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–∏–Ω–æ–Ω–∏–º–æ–≤
- Fallback –¥–ª—è SQL-–∞–≥–µ–Ω—Ç–∞

**–ò–Ω–¥–µ–∫—Å—ã:**
- –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (cars, used_cars)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –∏–∑ `backend/elasticsearch/synonyms.txt`

### 3. Qdrant

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è Mem0
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–ö–æ–ª–ª–µ–∫—Ü–∏–∏:**
- `mem0migrations` - –º–∏–≥—Ä–∞—Ü–∏–∏ Mem0
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 4. Redis

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–ª—é—á–∏:**
- `chat:history:{user_id}:{session_id}` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
- `chat:current:{user_id}` - —Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è
- `dialogue:topics:{user_id}:{session_id}` - —Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–∞
- `dialogue:interests:{user_id}` - –∏–Ω—Ç–µ—Ä–µ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `dialog:state:{user_id}` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞

---

## üîÑ –¶–µ–ø–æ—á–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –¶–µ–ø–æ—á–∫–∞ 1: –û–±—ã—á–Ω—ã–π —á–∞—Ç-–∑–∞–ø—Ä–æ—Å (RAG)

```
1. –ö–ª–∏–µ–Ω—Ç ‚Üí POST /api/chat/message
   ‚Üì
2. chat.py::send_message()
   ‚Üì
3. DatabaseService::create_chat() / get_chat()
   ‚Üì
4. _get_chat_history() - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ Redis
   ‚Üì
5. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ sources_data
   ‚Üì
6. RAGService::generate_response()
   ‚îÇ
   ‚îú‚îÄ‚Üí DatabaseService::search_articles_for_rag()
   ‚îú‚îÄ‚Üí DocumentService::search_documents_for_rag()
   ‚îú‚îÄ‚Üí DatabaseService::search_cars_for_rag()
   ‚îú‚îÄ‚Üí ElasticsearchService::search_cars()
   ‚îÇ
   ‚îú‚îÄ‚Üí RAGService::_rerank_documents() [FlashrankRerank]
   ‚îÇ
   ‚îú‚îÄ‚Üí DialogueHistoryService::get_relevant_memories()
   ‚îÇ   ‚îî‚îÄ‚Üí Mem0Service::search_memories()
   ‚îÇ       ‚îî‚îÄ‚Üí Qdrant (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫)
   ‚îÇ
   ‚îú‚îÄ‚Üí RAGService::_build_context()
   ‚îÇ
   ‚îú‚îÄ‚Üí RAGService::_create_prompt()
   ‚îÇ   ‚îú‚îÄ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (Redis)
   ‚îÇ   ‚îú‚îÄ –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Mem0/Qdrant)
   ‚îÇ   ‚îú‚îÄ –ö–æ–Ω—Ç–µ–∫—Å—Ç (—Å—Ç–∞—Ç—å–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∞–≤—Ç–æ–º–æ–±–∏–ª–∏)
   ‚îÇ   ‚îî‚îÄ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
   ‚îÇ
   ‚îî‚îÄ‚Üí _generate_with_ai_settings()
       ‚îú‚îÄ Ollama (–ª–æ–∫–∞–ª—å–Ω–æ)
       ‚îú‚îÄ Mistral API
       ‚îú‚îÄ OpenAI API
       ‚îî‚îÄ Anthropic API
   ‚Üì
7. CarDealerAssistantService::get_clarifying_questions()
   ‚Üì
8. DatabaseService::save_chat_message()
   ‚Üì
9. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis (_session_key)
   ‚Üì
10. DialogueHistoryService::add_message()
    ‚îî‚îÄ‚Üí Mem0Service::add_memory() [–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏]
        ‚îî‚îÄ‚Üí Qdrant (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
   ‚Üì
11. –í–æ–∑–≤—Ä–∞—Ç ChatMessageResponse
```

### –¶–µ–ø–æ—á–∫–∞ 2: –ß–∞—Ç-–∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ LangGraph

```
1. –ö–ª–∏–µ–Ω—Ç ‚Üí POST /api/chat/message
   ‚Üì
2. chat.py::send_message()
   ‚Üì
3. LangGraphRAGService::generate_with_graph()
   ‚Üì
4. –ì—Ä–∞—Ñ —Å–æ—Å—Ç–æ—è–Ω–∏–π:
   ‚îÇ
   ‚îú‚îÄ‚Üí retrieve_memories_node
   ‚îÇ   ‚îî‚îÄ‚Üí DialogueHistoryService::get_relevant_memories()
   ‚îÇ       ‚îî‚îÄ‚Üí Mem0Service::search_memories()
   ‚îÇ
   ‚îú‚îÄ‚Üí retrieve_docs_node
   ‚îÇ   ‚îî‚îÄ‚Üí RAGService (–ø–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
   ‚îÇ
   ‚îú‚îÄ‚Üí generate_node
   ‚îÇ   ‚îî‚îÄ‚Üí RAGService::generate_response()
   ‚îÇ
   ‚îî‚îÄ‚Üí save_memory_node
       ‚îî‚îÄ‚Üí Mem0Service::add_memory()
   ‚Üì
5. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```

### –¶–µ–ø–æ—á–∫–∞ 3: SQL-–∞–≥–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å

```
1. –ö–ª–∏–µ–Ω—Ç ‚Üí POST /api/ai/sql-agent/query
   ‚Üì
2. ai.py::query_sql_agent()
   ‚Üì
3. SQLAgentService::process_question()
   ‚Üì
4. SQLAgentService::_generate_sql()
   ‚îÇ   ‚îî‚îÄ‚Üí LLM (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL)
   ‚Üì
5. SQLAgentService::execute_sql_query()
   ‚îÇ   ‚îî‚îÄ‚Üí DatabaseService (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL)
   ‚Üì
6. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   ‚îÇ
   ‚îú‚îÄ‚Üí –£—Å–ø–µ—Ö: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   ‚îÇ
   ‚îî‚îÄ‚Üí –û—à–∏–±–∫–∞: Fallback –Ω–∞ Elasticsearch
       ‚îî‚îÄ‚Üí ElasticsearchService::search_cars()
   ‚Üì
7. –í–æ–∑–≤—Ä–∞—Ç SQLAgentResponse
```

### –¶–µ–ø–æ—á–∫–∞ 4: –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

```
1. –ö–ª–∏–µ–Ω—Ç ‚Üí POST /api/cars/search
   ‚Üì
2. cars.py::search_cars()
   ‚Üì
3. IntelligentSearchService::search_with_intelligence()
   ‚îÇ
   ‚îú‚îÄ‚Üí QueryAnalyzerService::analyze()
   ‚îÇ   ‚îî‚îÄ‚Üí LLM (–∞–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞)
   ‚îÇ
   ‚îú‚îÄ‚Üí CarQueryGeneratorService::generate_query()
   ‚îÇ   ‚îî‚îÄ‚Üí LLM (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞)
   ‚îÇ
   ‚îú‚îÄ‚Üí ElasticsearchService::search_cars()
   ‚îÇ   ‚îî‚îÄ‚Üí Elasticsearch (–ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)
   ‚îÇ
   ‚îú‚îÄ‚Üí VectorSearchService::similarity_search()
   ‚îÇ   ‚îî‚îÄ‚Üí PostgreSQL + pgvector (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫)
   ‚îÇ
   ‚îî‚îÄ‚Üí CarResultProcessorService::process()
       ‚îî‚îÄ‚Üí –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   ‚Üì
4. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

---

## üìä –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Ç–æ–∫ 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –î–∏–∞–ª–æ–≥
   ‚Üì
DialogueHistoryService::add_message()
   ‚Üì
Redis (–∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
   ‚Üì
[–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏] Mem0Service::add_memory()
   ‚Üì
Mem0 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤)
   ‚Üì
Qdrant (–≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
```

### –ü–æ—Ç–æ–∫ 2: –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π

```
–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üì
DialogueHistoryService::get_relevant_memories()
   ‚Üì
Mem0Service::search_memories()
   ‚Üì
Qdrant (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)
   ‚Üì
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞
   ‚Üì
–í–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM
```

### –ü–æ—Ç–æ–∫ 3: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

```
–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (XML, Excel)
   ‚Üì
ImportService
   ‚Üì
DatabaseService (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL)
   ‚Üì
ElasticsearchService (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Elasticsearch)
   ‚Üì
VectorSearchService (—Å–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)
   ‚Üì
PostgreSQL + pgvector (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤)
```

### –ü–æ—Ç–æ–∫ 4: RAG –ø–æ–∏—Å–∫ (–¥–µ—Ç–∞–ª—å–Ω—ã–π)

```
1. –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üì
2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
   ‚îú‚îÄ‚Üí –£–¥–∞–ª–µ–Ω–∏–µ URL
   ‚îú‚îÄ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è)
   ‚îú‚îÄ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ (—Ü–µ–Ω–∞, –≥–æ–¥, –ø—Ä–æ–±–µ–≥)
   ‚îú‚îÄ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ ("–¥–µ—à–µ–≤–ª–µ", "–¥–æ—Ä–æ–∂–µ")
   ‚îî‚îÄ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
   ‚Üì
3. –ü–æ–∏—Å–∫ VIN (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç)
   ‚Üì
4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º:
   ‚îÇ
   ‚îú‚îÄ‚Üí PostgreSQL:
   ‚îÇ   ‚îú‚îÄ‚Üí search_articles_for_rag() - —Å—Ç–∞—Ç—å–∏
   ‚îÇ   ‚îú‚îÄ‚Üí _search_by_meta() - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–µ–π
   ‚îÇ   ‚îú‚îÄ‚Üí search_documents_for_rag() - –¥–æ–∫—É–º–µ–Ω—Ç—ã
   ‚îÇ   ‚îú‚îÄ‚Üí search_cars_for_rag() - –Ω–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
   ‚îÇ   ‚îî‚îÄ‚Üí search_used_cars_for_rag() - –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ
   ‚îÇ
   ‚îú‚îÄ‚Üí Elasticsearch:
   ‚îÇ   ‚îî‚îÄ‚Üí search_cars() - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
   ‚îÇ
   ‚îî‚îÄ‚Üí pgvector (—á–µ—Ä–µ–∑ VectorSearchService):
       ‚îî‚îÄ‚Üí similarity_search() - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
   ‚Üì
5. –°–±–æ—Ä –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   ‚Üì
6. –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (FlashrankRerank):
   ‚îú‚îÄ‚Üí _rerank_documents() - —Å—Ç–∞—Ç—å–∏
   ‚îî‚îÄ‚Üí _rerank_document_objects() - –¥–æ–∫—É–º–µ–Ω—Ç—ã
   ‚Üì
7. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏:
   ‚îî‚îÄ‚Üí DialogueHistoryService::get_relevant_memories()
       ‚îî‚îÄ‚Üí Mem0Service::search_memories()
           ‚îî‚îÄ‚Üí Qdrant (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)
   ‚Üì
8. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
   ‚îú‚îÄ‚Üí –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–æ–≤ ("–∫—Ä–æ–º–µ BRAND")
   ‚îú‚îÄ‚Üí –°—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (—Ü–µ–Ω–∞, –≥–æ–¥, –ø—Ä–æ–±–µ–≥)
   ‚îî‚îÄ‚Üí –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
   ‚Üì
9. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
   ‚îú‚îÄ‚Üí _build_context() - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   ‚îú‚îÄ‚Üí –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–µ—Å–ª–∏ –Ω–µ—Ç —è–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤)
   ‚îî‚îÄ‚Üí –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π)
   ‚Üì
10. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞:
    ‚îî‚îÄ‚Üí _create_prompt()
        ‚îú‚îÄ‚Üí –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (Redis)
        ‚îú‚îÄ‚Üí –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (Mem0/Qdrant)
        ‚îú‚îÄ‚Üí –ö–æ–Ω—Ç–µ–∫—Å—Ç (—Å—Ç–∞—Ç—å–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∞–≤—Ç–æ–º–æ–±–∏–ª–∏)
        ‚îî‚îÄ‚Üí –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
    ‚Üì
11. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞:
    ‚îî‚îÄ‚Üí _generate_with_ai_settings()
        ‚îú‚îÄ‚Üí Ollama (–ª–æ–∫–∞–ª—å–Ω–æ, fallback)
        ‚îú‚îÄ‚Üí Mistral API (–æ—Å–Ω–æ–≤–Ω–æ–π)
        ‚îú‚îÄ‚Üí OpenAI API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        ‚îî‚îÄ‚Üí Anthropic API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    ‚Üì
12. –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞:
    ‚îú‚îÄ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    ‚îú‚îÄ‚Üí –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
    ‚îî‚îÄ‚Üí –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
    ‚Üì
13. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
    ‚îú‚îÄ‚Üí DatabaseService::save_chat_message() - –ë–î
    ‚îú‚îÄ‚Üí Redis (–∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞)
    ‚îî‚îÄ‚Üí Mem0Service::add_memory() - –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
    ‚Üì
14. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É
```

---

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –°—Ö–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
FastAPI (main.py)
  ‚îÇ
  ‚îú‚îÄ‚Üí API Routers
  ‚îÇ   ‚îú‚îÄ‚Üí chat.py
  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚Üí RAGService
  ‚îÇ   ‚îÇ       ‚îú‚îÄ‚Üí DatabaseService
  ‚îÇ   ‚îÇ       ‚îú‚îÄ‚Üí DocumentService
  ‚îÇ   ‚îÇ       ‚îú‚îÄ‚Üí ElasticsearchService
  ‚îÇ   ‚îÇ       ‚îú‚îÄ‚Üí DialogueHistoryService
  ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚Üí Mem0Service
  ‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚Üí Qdrant
  ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚Üí Redis
  ‚îÇ   ‚îÇ       ‚îî‚îÄ‚Üí FlashrankRerank
  ‚îÇ   ‚îÇ
  ‚îÇ   ‚îú‚îÄ‚Üí ai.py
  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚Üí SQLAgentService
  ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚Üí DatabaseService
  ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚Üí ElasticsearchService
  ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚Üí DialogStateService
  ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚Üí Redis
  ‚îÇ   ‚îÇ   ‚îÇ
  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚Üí CarDealerAssistantService
  ‚îÇ   ‚îÇ       ‚îú‚îÄ‚Üí Multiple services
  ‚îÇ   ‚îÇ       ‚îî‚îÄ‚Üí ...
  ‚îÇ   ‚îÇ
  ‚îÇ   ‚îî‚îÄ‚Üí cars.py
  ‚îÇ       ‚îî‚îÄ‚Üí IntelligentSearchService
  ‚îÇ           ‚îú‚îÄ‚Üí QueryAnalyzerService
  ‚îÇ           ‚îú‚îÄ‚Üí CarQueryGeneratorService
  ‚îÇ           ‚îú‚îÄ‚Üí ElasticsearchService
  ‚îÇ           ‚îú‚îÄ‚Üí VectorSearchService
  ‚îÇ           ‚îî‚îÄ‚Üí CarResultProcessorService
  ‚îÇ
  ‚îî‚îÄ‚Üí Services Layer
      ‚îú‚îÄ‚Üí DatabaseService ‚Üí PostgreSQL
      ‚îú‚îÄ‚Üí ElasticsearchService ‚Üí Elasticsearch
      ‚îú‚îÄ‚Üí VectorSearchService ‚Üí PostgreSQL (pgvector)
      ‚îú‚îÄ‚Üí Mem0Service ‚Üí Qdrant
      ‚îî‚îÄ‚Üí DialogStateService ‚Üí Redis
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **API Layer:** FastAPI —Ä–æ—É—Ç–µ—Ä—ã
- **Service Layer:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Data Layer:** –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### 2. Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- SQL-–∞–≥–µ–Ω—Ç ‚Üí Elasticsearch (–ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
- Qdrant ‚Üí In-memory (–ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- LangGraph ‚Üí –û–±—ã—á–Ω—ã–π RAG (–ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- FlashrankRerank ‚Üí –ë–µ–∑ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è (–ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)

### 3. –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Ollama, Mistral, OpenAI, Anthropic)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ API

### 4. –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- PostgreSQL - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- Qdrant - –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
- Redis - –∫—ç—à –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- Elasticsearch - –ø–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å

### 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ Docker
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ

---

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 1. PostgreSQL (–û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

#### –¢–∞–±–ª–∏—Ü–∞: `cars` (–ù–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```sql
CREATE TABLE cars (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    doc_num VARCHAR(50),
    stock_qty INTEGER,
    mark VARCHAR(100),
    model VARCHAR(100),
    code_compl VARCHAR(100),
    vin VARCHAR(50),
    color VARCHAR(50),
    price VARCHAR(50),
    city VARCHAR(100),
    manufacture_year INTEGER,
    fuel_type VARCHAR(50),
    power VARCHAR(50),
    body_type VARCHAR(50),
    gear_box_type VARCHAR(50),
    driving_gear_type VARCHAR(50),
    engine_vol INTEGER,
    engine VARCHAR(100),
    fuel_consumption VARCHAR(50),
    max_torque VARCHAR(50),
    acceleration VARCHAR(20),
    max_speed VARCHAR(20),
    eco_class VARCHAR(20),
    sale_price VARCHAR(50),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "id": 12345,
  "title": "Audi A4 2.0 TDI",
  "doc_num": "DOC-2024-001",
  "stock_qty": 3,
  "mark": "Audi",
  "model": "A4",
  "vin": "WAUZZZ8K9KA123456",
  "color": "–ß–µ—Ä–Ω—ã–π",
  "price": "3500000",
  "sale_price": "3200000",
  "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
  "manufacture_year": 2024,
  "fuel_type": "–î–∏–∑–µ–ª—å",
  "power": "190",
  "body_type": "–°–µ–¥–∞–Ω",
  "gear_box_type": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è",
  "driving_gear_type": "–ü–æ–ª–Ω—ã–π",
  "engine_vol": 2000,
  "engine": "2.0 TDI",
  "fuel_consumption": "5.5",
  "max_torque": "400",
  "acceleration": "7.3",
  "max_speed": "240",
  "eco_class": "–ï–≤—Ä–æ-6",
  "created_at": "2024-11-16T10:30:00+00:00"
}
```

#### –¢–∞–±–ª–∏—Ü–∞: `used_cars` (–ü–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞ `cars`, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:
- `mileage` INTEGER - –ø—Ä–æ–±–µ–≥
- `condition` VARCHAR(50) - —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `owner_count` INTEGER - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "id": 67890,
  "mark": "BMW",
  "model": "X5",
  "vin": "WBAFR9C50DD123456",
  "price": "2500000",
  "city": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
  "manufacture_year": 2020,
  "mileage": 45000,
  "fuel_type": "–ë–µ–Ω–∑–∏–Ω",
  "body_type": "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫",
  "gear_box_type": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è",
  "driving_gear_type": "–ü–æ–ª–Ω—ã–π",
  "power": "340",
  "engine_vol": 3000,
  "owner_count": 1,
  "condition": "–û—Ç–ª–∏—á–Ω–æ–µ",
  "created_at": "2024-11-16T10:30:00+00:00"
}
```

#### –¢–∞–±–ª–∏—Ü–∞: `articles` (–°—Ç–∞—Ç—å–∏)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```sql
CREATE TABLE articles (
    id SERIAL PRIMARY KEY,
    title VARCHAR(1024) NOT NULL,
    text TEXT NOT NULL,
    url VARCHAR(1024),
    language VARCHAR(10) DEFAULT 'ru',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "id": 1,
  "title": "–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å: —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
  "text": "–í—ã–±–æ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è - —ç—Ç–æ –≤–∞–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ...",
  "url": "https://example.com/articles/1",
  "language": "ru",
  "created_at": "2024-11-16T10:30:00+00:00"
}
```

#### –¢–∞–±–ª–∏—Ü–∞: `chat_messages` (–°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```sql
CREATE TABLE chat_messages (
    id SERIAL PRIMARY KEY,
    chat_id INTEGER REFERENCES chats(id) ON DELETE CASCADE,
    user_id VARCHAR(100) NOT NULL,
    message TEXT NOT NULL,
    response TEXT,
    feedback INTEGER,  -- 1 –∏–ª–∏ -1
    feedback_comment TEXT,
    related_article_ids TEXT,  -- JSON —Å—Ç—Ä–æ–∫–∞
    sources_data TEXT,  -- JSON —Å—Ç—Ä–æ–∫–∞
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "id": 1001,
  "chat_id": 50,
  "user_id": "user-123",
  "message": "–ü–æ–∫–∞–∂–∏ –º–Ω–µ Audi –¥–æ 3 –º–∏–ª–ª–∏–æ–Ω–æ–≤",
  "response": "–ù–∞—à–µ–ª –¥–ª—è –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Audi...",
  "feedback": 1,
  "related_article_ids": "[1, 2, 3]",
  "sources_data": "{\"cars\": [{\"id\": 12345, \"mark\": \"Audi\", \"model\": \"A4\"}], \"articles\": [1, 2], \"documents\": []}",
  "created_at": "2024-11-16T10:30:00+00:00"
}
```

#### –¢–∞–±–ª–∏—Ü–∞: `langchain_pg_embedding` (–í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```sql
CREATE TABLE langchain_pg_embedding_cars_collection (
    uuid UUID PRIMARY KEY,
    collection_id UUID,
    embedding vector(1024),  -- pgvector —Ç–∏–ø
    document TEXT,
    cmetadata JSONB,
    custom_id VARCHAR,
    CONSTRAINT langchain_pg_embedding_cars_collection_collection_id_fkey 
        FOREIGN KEY (collection_id) REFERENCES langchain_pg_collection(uuid) ON DELETE CASCADE
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "collection_id": "123e4567-e89b-12d3-a456-426614174000",
  "embedding": [0.123, -0.456, 0.789, ...],  -- 1024 –∏–∑–º–µ—Ä–µ–Ω–∏—è
  "document": "Audi A4 2.0 TDI, 2024, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, 3500000 —Ä—É–±",
  "cmetadata": {
    "car_id": 12345,
    "type": "car",
    "mark": "Audi",
    "model": "A4",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä"
  },
  "custom_id": "car_12345"
}
```

---

### 2. Elasticsearch (–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)

#### –ò–Ω–¥–µ–∫—Å: `cars`

**–ú–∞–ø–ø–∏–Ω–≥:**
```json
{
  "mappings": {
    "properties": {
      "id": {"type": "integer"},
      "type": {"type": "keyword"},  // "car" –∏–ª–∏ "used_car"
      "mark": {
        "type": "text",
        "analyzer": "ru_en_analyzer",
        "fields": {
          "keyword": {"type": "keyword"},
          "autocomplete": {"type": "text", "analyzer": "ru_en_analyzer_autocomplete"}
        }
      },
      "model": {
        "type": "text",
        "analyzer": "ru_en_analyzer",
        "fields": {
          "keyword": {"type": "keyword"},
          "autocomplete": {"type": "text", "analyzer": "ru_en_analyzer_autocomplete"}
        }
      },
      "manufacture_year": {"type": "integer"},
      "price": {"type": "float"},
      "city": {"type": "text", "analyzer": "ru_en_analyzer"},
      "fuel_type": {"type": "text", "analyzer": "ru_en_analyzer"},
      "body_type": {"type": "text", "analyzer": "ru_en_analyzer"},
      "gear_box_type": {"type": "text", "analyzer": "ru_en_analyzer"},
      "driving_gear_type": {"type": "text", "analyzer": "ru_en_analyzer"},
      "engine_vol": {"type": "float"},
      "power": {"type": "float"},
      "mileage": {"type": "integer"},
      "description": {"type": "text", "analyzer": "ru_en_analyzer"},
      "vin": {"type": "keyword"}
    }
  }
}
```

**–ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
```json
{
  "_index": "cars",
  "_id": "12345",
  "_source": {
    "id": 12345,
    "type": "car",
    "mark": "Audi",
    "model": "A4",
    "title": "Audi A4 2.0 TDI",
    "vin": "WAUZZZ8K9KA123456",
    "color": "–ß–µ—Ä–Ω—ã–π",
    "price": 3500000.0,
    "sale_price": 3200000.0,
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "manufacture_year": 2024,
    "fuel_type": "–î–∏–∑–µ–ª—å",
    "power": 190.0,
    "body_type": "–°–µ–¥–∞–Ω",
    "gear_box_type": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è",
    "driving_gear_type": "–ü–æ–ª–Ω—ã–π",
    "engine_vol": 2000.0,
    "engine": "2.0 TDI",
    "fuel_consumption": "5.5",
    "description": "Audi A4 2.0 TDI, 2024 –≥–æ–¥, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á, –ø–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥, —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç"
  }
}
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è:**
```json
{
  "_index": "cars",
  "_id": "67890",
  "_source": {
    "id": 67890,
    "type": "used_car",
    "mark": "BMW",
    "model": "X5",
    "vin": "WBAFR9C50DD123456",
    "price": 2500000.0,
    "city": "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
    "manufacture_year": 2020,
    "mileage": 45000,
    "fuel_type": "–ë–µ–Ω–∑–∏–Ω",
    "body_type": "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫",
    "gear_box_type": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è",
    "driving_gear_type": "–ü–æ–ª–Ω—ã–π",
    "power": 340.0,
    "engine_vol": 3000.0,
    "description": "BMW X5, 2020 –≥–æ–¥, –ø—Ä–æ–±–µ–≥ 45000 –∫–º, –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ"
  }
}
```

---

### 3. Redis (–ö—ç—à –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)

#### –ö–ª—é—á–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** `chat:history:{user_id}:{session_id}`

**–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** List (Redis List)

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
[
  {
    "q": "–ü–æ–∫–∞–∂–∏ –º–Ω–µ Audi –¥–æ 3 –º–∏–ª–ª–∏–æ–Ω–æ–≤",
    "a": "–ù–∞—à–µ–ª –¥–ª—è –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Audi...",
    "ts": 1700123456.789
  },
  {
    "q": "–ê –µ—Å—Ç—å —Å –ø–æ–ª–Ω—ã–º –ø—Ä–∏–≤–æ–¥–æ–º?",
    "a": "–î–∞, –≤–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –ø–æ–ª–Ω—ã–º –ø—Ä–∏–≤–æ–¥–æ–º...",
    "ts": 1700123500.123
  }
]
```

**–ö–æ–º–∞–Ω–¥—ã Redis:**
- `RPUSH chat:history:user-123:session-456 '{"q":"...","a":"...","ts":...}'`
- `LRANGE chat:history:user-123:session-456 0 -1`

#### –ö–ª—é—á–∏ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** `dialog:state:{user_id}`

**–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** String (JSON)

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "criteria": {
    "mark": "Audi",
    "max_price": 3000000,
    "driving_gear_type": "–ü–æ–ª–Ω—ã–π"
  },
  "mode": "search",
  "last_shown_cars": [
    {"id": 12345, "mark": "Audi", "model": "A4"},
    {"id": 12346, "mark": "Audi", "model": "A6"}
  ],
  "current_question": null
}
```

**TTL:** 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)

#### –ö–ª—é—á–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** `chat:current:{user_id}`

**–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** String

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```
"session-456"
```

#### –ö–ª—é—á–∏ –¥–ª—è —Ç–µ–º –¥–∏–∞–ª–æ–≥–∞

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** `dialogue:topics:{user_id}:{session_id}`

**–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** Set (Redis Set)

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```
["Audi", "–ø–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥", "–¥–æ 3 –º–∏–ª–ª–∏–æ–Ω–æ–≤"]
```

#### –ö–ª—é—á–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** `dialogue:interests:{user_id}`

**–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** Hash (Redis Hash)

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```
{
  "preferred_brands": "Audi,BMW",
  "preferred_body_types": "–°–µ–¥–∞–Ω,–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫",
  "max_price": "5000000",
  "preferred_cities": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä,–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É"
}
```

---

### 4. Qdrant (–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è Mem0)

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è: `mem0migrations`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Mem0

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "collection_name": "mem0migrations",
  "vector_size": 1536,  // –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (OpenAI)
  "distance": "Cosine"
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `{user_id}_memories`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ—á–∫–∏ (Point):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "vector": [0.123, -0.456, 0.789, ...],  // 1536 –∏–∑–º–µ—Ä–µ–Ω–∏–π
  "payload": {
    "user_id": "user-123",
    "memory": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏ Audi —Å –ø–æ–ª–Ω—ã–º –ø—Ä–∏–≤–æ–¥–æ–º –¥–æ 3 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä—É–±–ª–µ–π",
    "metadata": {
      "created_at": "2024-11-16T10:30:00+00:00",
      "source": "dialogue_history",
      "relevance_score": 0.95
    },
    "original_messages": [
      {
        "role": "user",
        "content": "–ü–æ–∫–∞–∂–∏ –º–Ω–µ Audi –¥–æ 3 –º–∏–ª–ª–∏–æ–Ω–æ–≤"
      },
      {
        "role": "assistant",
        "content": "–ù–∞—à–µ–ª –¥–ª—è –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Audi..."
      }
    ]
  }
}
```

**–ü—Ä–∏–º–µ—Ä –ø–æ–∏—Å–∫–∞:**
```python
# –ó–∞–ø—Ä–æ—Å –∫ Qdrant
{
  "vector": [0.123, -0.456, ...],  // –≠–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞
  "limit": 10,
  "score_threshold": 0.7,
  "filter": {
    "must": [
      {
        "key": "user_id",
        "match": {
          "value": "user-123"
        }
      }
    ]
  }
}
```

---

### 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –ø–æ–ª–µ–π

#### `sources_data` –≤ `chat_messages`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "cars": [
    {
      "id": 12345,
      "mark": "Audi",
      "model": "A4",
      "price": "3500000",
      "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä"
    }
  ],
  "used_cars": [
    {
      "id": 67890,
      "mark": "BMW",
      "model": "X5",
      "price": "2500000",
      "mileage": 45000
    }
  ],
  "articles": [1, 2, 3],
  "documents": [10, 11]
}
```

#### `related_article_ids` –≤ `chat_messages`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** JSON –º–∞—Å—Å–∏–≤
```json
[1, 2, 3, 5, 8]
```

#### `cmetadata` –≤ `langchain_pg_embedding`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "car_id": 12345,
  "type": "car",
  "mark": "Audi",
  "model": "A4",
  "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
  "price": 3500000,
  "year": 2024,
  "fuel_type": "–î–∏–∑–µ–ª—å"
}
```

---

### 6. –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

#### Many-to-Many: Articles ‚Üî Categories

**–¢–∞–±–ª–∏—Ü–∞:** `article_categories`
```sql
CREATE TABLE article_categories (
    article_id INTEGER REFERENCES articles(id),
    category_id INTEGER REFERENCES categories(id),
    PRIMARY KEY (article_id, category_id)
);
```

#### Many-to-Many: Articles ‚Üî Tags

**–¢–∞–±–ª–∏—Ü–∞:** `article_tags`
```sql
CREATE TABLE article_tags (
    article_id INTEGER REFERENCES articles(id),
    tag_id INTEGER REFERENCES tags(id),
    PRIMARY KEY (article_id, tag_id)
);
```

#### One-to-Many: Car ‚Üí CarPicture

**–¢–∞–±–ª–∏—Ü–∞:** `car_pictures`
```sql
CREATE TABLE car_pictures (
    id SERIAL PRIMARY KEY,
    car_id INTEGER REFERENCES cars(id) ON DELETE CASCADE,
    url VARCHAR(500),
    type VARCHAR(50),
    seqno INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "id": 1001,
  "car_id": 12345,
  "url": "https://example.com/images/audi-a4-1.jpg",
  "type": "exterior",
  "seqno": 1,
  "created_at": "2024-11-16T10:30:00+00:00"
}
```

#### One-to-Many: Car ‚Üí CarOptionsGroup ‚Üí CarOption

**–¢–∞–±–ª–∏—Ü–∞:** `car_options_groups`
```sql
CREATE TABLE car_options_groups (
    id SERIAL PRIMARY KEY,
    car_id INTEGER REFERENCES cars(id) ON DELETE CASCADE,
    code VARCHAR(50),
    name VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**–¢–∞–±–ª–∏—Ü–∞:** `car_options`
```sql
CREATE TABLE car_options (
    id SERIAL PRIMARY KEY,
    car_id INTEGER REFERENCES cars(id) ON DELETE CASCADE,
    options_group_id INTEGER REFERENCES car_options_groups(id),
    code VARCHAR(50),
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "options_group": {
    "id": 1,
    "car_id": 12345,
    "code": "SAFETY",
    "name": "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
    "options": [
      {
        "id": 10,
        "code": "ABS",
        "description": "–ê–Ω—Ç–∏–±–ª–æ–∫–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ—Ä–º–æ–∑–æ–≤"
      },
      {
        "id": 11,
        "code": "ESP",
        "description": "–°–∏—Å—Ç–µ–º–∞ –∫—É—Ä—Å–æ–≤–æ–π —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏"
      }
    ]
  }
}
```

---

### 7. –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### PostgreSQL –∏–Ω–¥–µ–∫—Å—ã

```sql
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_cars_mark ON cars(mark);
CREATE INDEX idx_cars_model ON cars(model);
CREATE INDEX idx_cars_city ON cars(city);
CREATE INDEX idx_cars_manufacture_year ON cars(manufacture_year);
CREATE INDEX idx_cars_fuel_type ON cars(fuel_type);
CREATE INDEX idx_cars_body_type ON cars(body_type);
CREATE INDEX idx_cars_vin ON cars(vin);
CREATE INDEX idx_used_cars_mileage ON used_cars(mileage);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π
CREATE INDEX idx_chat_messages_user_id ON chat_messages(user_id);
CREATE INDEX idx_chat_messages_chat_id ON chat_messages(chat_id);
CREATE INDEX idx_car_pictures_car_id ON car_pictures(car_id);
```

#### pgvector –∏–Ω–¥–µ–∫—Å—ã

```sql
-- HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX langchain_pg_embedding_cars_collection_embedding_idx 
ON langchain_pg_embedding_cars_collection 
USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);
```

---

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

#### 1. User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- `id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `full_name` - –ü–æ–ª–Ω–æ–µ –∏–º—è
- `hashed_password` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `role` - –†–æ–ª—å (user/admin)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

#### 2. Chat (–ß–∞—Ç)
- `id` - ID —á–∞—Ç–∞
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–°–≤—è–∑–∏:** `messages` (ChatMessage)

#### 3. ChatMessage (–°–æ–æ–±—â–µ–Ω–∏–µ)
- `id` - ID —Å–æ–æ–±—â–µ–Ω–∏—è
- `chat_id` - ID —á–∞—Ç–∞ (nullable –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `message` - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `response` - –û—Ç–≤–µ—Ç AI
- `feedback` - –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (1/-1)
- `feedback_comment` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- `related_article_ids` - JSON —Å ID —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- `sources_data` - JSON —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ (cars, articles, documents)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°–≤—è–∑–∏:** `chat` (Chat)

#### 4. Article (–°—Ç–∞—Ç—å—è)
- `id` - ID —Å—Ç–∞—Ç—å–∏
- `title` - –ó–∞–≥–æ–ª–æ–≤–æ–∫
- `text` - –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
- `url` - URL —Å—Ç–∞—Ç—å–∏
- `language` - –Ø–∑—ã–∫ (ru/en)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–°–≤—è–∑–∏:** `categories` (Category), `tags` (Tag)

#### 5. Document (–î–æ–∫—É–º–µ–Ω—Ç)
- `id` - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `filename` - –ò–º—è —Ñ–∞–π–ª–∞
- `original_filename` - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è
- `file_type` - –¢–∏–ø —Ñ–∞–π–ª–∞ (pdf/doc/docx/txt)
- `file_size` - –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- `file_content` - –ë–∏–Ω–∞—Ä–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- `title` - –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π)
- `extracted_text` - –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- `topic` - –¢–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `summary` - –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- `path` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
- `language` - –Ø–∑—ã–∫
- `processing_status` - –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `uploaded_at` - –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- `processed_at` - –î–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–°–≤—è–∑–∏:** `chunks` (DocumentChunk), `categories`, `tags`

#### 6. DocumentChunk (–ß–∞–Ω–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞)
- `id` - ID —á–∞–Ω–∫–∞
- `document_id` - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `chunk_index` - –ò–Ω–¥–µ–∫—Å —á–∞–Ω–∫–∞
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞–Ω–∫–∞
- `metadata` - JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°–≤—è–∑–∏:** `document` (Document)

#### 7. Car (–ù–æ–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å)
- `id` - ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- `mark` - –ú–∞—Ä–∫–∞
- `model` - –ú–æ–¥–µ–ª—å
- `vin` - VIN –Ω–æ–º–µ—Ä
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `price` - –¶–µ–Ω–∞
- `sale_price` - –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
- `stock_qty` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ
- `manufacture_year` - –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞
- `model_year` - –ì–æ–¥ –º–æ–¥–µ–ª–∏
- `fuel_type` - –¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞
- `power` - –ú–æ—â–Ω–æ—Å—Ç—å (–ª.—Å.)
- `body_type` - –¢–∏–ø –∫—É–∑–æ–≤–∞
- `gear_box_type` - –¢–∏–ø –ö–ü–ü
- `driving_gear_type` - –¢–∏–ø –ø—Ä–∏–≤–æ–¥–∞
- `engine_vol` - –û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è
- `engine` - –î–≤–∏–≥–∞—Ç–µ–ª—å
- `fuel_consumption` - –†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞
- `max_torque` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—Ä—É—Ç—è—â–∏–π –º–æ–º–µ–Ω—Ç
- `acceleration` - –†–∞–∑–≥–æ–Ω
- `max_speed` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- `eco_class` - –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å
- `city` - –ì–æ—Ä–æ–¥
- `doc_num` - –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°–≤—è–∑–∏:** `pictures` (CarPicture), `options` (CarOption)

#### 8. UsedCar (–ü–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å)
- –í—Å–µ –ø–æ–ª—è –∏–∑ `Car` +
- `mileage` - –ü—Ä–æ–±–µ–≥
- `condition` - –°–æ—Å—Ç–æ—è–Ω–∏–µ
- `owner_count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- **–°–≤—è–∑–∏:** `pictures` (UsedCarPicture), `options` (CarOption)

#### 9. Category (–ö–∞—Ç–µ–≥–æ—Ä–∏—è)
- `id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°–≤—è–∑–∏:** `articles` (Article), `documents` (Document)

#### 10. Tag (–¢–µ–≥)
- `id` - ID —Ç–µ–≥–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–°–≤—è–∑–∏:** `articles` (Article), `documents` (Document)

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

```
User
  ‚îî‚îÄ‚Üí Chat (1:N)
      ‚îî‚îÄ‚Üí ChatMessage (1:N)

Article ‚Üê‚Üí Category (M:N —á–µ—Ä–µ–∑ article_categories)
Article ‚Üê‚Üí Tag (M:N —á–µ—Ä–µ–∑ article_tags)

Document ‚Üê‚Üí Category (M:N —á–µ—Ä–µ–∑ document_categories)
Document ‚Üê‚Üí Tag (M:N —á–µ—Ä–µ–∑ document_tags)
Document ‚îî‚îÄ‚Üí DocumentChunk (1:N)

Car ‚îî‚îÄ‚Üí CarPicture (1:N)
Car ‚îî‚îÄ‚Üí CarOption (M:N —á–µ—Ä–µ–∑ CarOptionsGroup)

UsedCar ‚îî‚îÄ‚Üí UsedCarPicture (1:N)
UsedCar ‚îî‚îÄ‚Üí CarOption (M:N —á–µ—Ä–µ–∑ CarOptionsGroup)
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (docker-compose.yml)

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `DATABASE_URL` - PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `POSTGRES_HOST` - –•–æ—Å—Ç PostgreSQL
- `POSTGRES_PORT` - –ü–æ—Ä—Ç PostgreSQL (5432)
- `POSTGRES_DB` - –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (vectordb)
- `POSTGRES_USER` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (postgres)
- `POSTGRES_PASSWORD` - –ü–∞—Ä–æ–ª—å (password)

#### Elasticsearch
- `ELASTICSEARCH_HOST` - –•–æ—Å—Ç Elasticsearch (motorchik-elasticsearch)
- `ELASTICSEARCH_PORT` - –ü–æ—Ä—Ç Elasticsearch (9200)

#### Qdrant
- `QDRANT_URL` - URL Qdrant (http://motorchik-qdrant:6333)
- `MEM0_USE_QDRANT` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Qdrant –¥–ª—è Mem0 (true)

#### Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π)
- `OLLAMA_HOST` - –•–æ—Å—Ç Ollama (host.docker.internal)
- `OLLAMA_PORT` - –ü–æ—Ä—Ç Ollama (11434)
- `OLLAMA_MODEL` - –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (llama3:8b)

#### Redis (–∏–∑ .env –∏–ª–∏ config.py)
- `REDIS_HOST` - –•–æ—Å—Ç Redis (localhost)
- `REDIS_PORT` - –ü–æ—Ä—Ç Redis (6379)
- `REDIS_DB` - –ù–æ–º–µ—Ä –ë–î Redis (0)

#### AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–∏–∑ config.py –∏–ª–∏ .env)
- `OPENAI_API_KEY` - –ö–ª—é—á OpenAI API
- `MISTRAL_API_KEY` - –ö–ª—é—á Mistral API
- `ANTHROPIC_API_KEY` - –ö–ª—é—á Anthropic API

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (app/core/config.py)

**–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `postgres_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL
- `api_host/port` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API —Å–µ—Ä–≤–µ—Ä–∞
- `secret_key` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
- `debug` - –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

**AI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `ollama_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Ollama
- `mistral_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Mistral
- `openai_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ OpenAI

**–•—Ä–∞–Ω–∏–ª–∏—â–∞:**
- `chroma_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ChromaDB (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `redis_*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Redis

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **JWT —Ç–æ–∫–µ–Ω—ã** —á–µ—Ä–µ–∑ `python-jose`
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** —á–µ—Ä–µ–∑ `passlib[bcrypt]`
- **–†–æ–ª–∏:** user, admin
- **Middleware:** CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### –î–æ—Å—Ç—É–ø –∫ API
- –ü—É–±–ª–∏—á–Ω—ã–µ endpoints: `/api/chat/message`, `/api/cars/search`
- –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints: `/api/admin/*`, `/api/ai/sql-agent/toggle`
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å `admin`

---

## üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

#### 1. IntelligentSearchService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∞–Ω–∞–ª–∏–∑–æ–º –∑–∞–ø—Ä–æ—Å–∞
- –ê–Ω–∞–ª–∏–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

#### 2. CarDealerAssistantService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã

#### 3. QueryAnalyzerService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

#### 4. DialogStateService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø–æ–∏—Å–∫–∞
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–∏–∞–ª–æ–≥–∞

#### 5. VectorSearchService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ pgvector
- –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 6. DocumentService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
- –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

#### 7. ImportService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –ò–º–ø–æ—Ä—Ç –∏–∑ XML
- –ò–º–ø–æ—Ä—Ç –∏–∑ Excel
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### 8. ParserService
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏–Ω–≥ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ü–∞—Ä—Å–∏–Ω–≥ XML —Ñ–∞–π–ª–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python
- –ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è:
  - ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  - ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
  - ‚ùå –û—à–∏–±–∫–∏
  - üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã
  - üîç –ü–æ–∏—Å–∫

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ LLM
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Redis –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
2. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** - Elasticsearch –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** - pgvector –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
4. **–ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ** - FlashrankRerank –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
5. **–ë–∞—Ç—á–∏–Ω–≥** - –ì—Ä—É–ø–ø–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ:** –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ backend
- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ:** –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –†–µ–ø–ª–∏–∫–∞—Ü–∏—è PostgreSQL
- **–ö—ç—à:** Redis Cluster –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç Motorchik –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–ª–æ–∂–Ω—É—é AI-—Å–∏—Å—Ç–µ–º—É —Å:

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ AI-—Å–µ—Ä–≤–∏—Å–æ–≤** –∏ –º–æ–¥–µ–ª–µ–π
- ‚úÖ **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö –∏ –ø–∞–º—è—Ç–∏
- ‚úÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞** (–ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π + –≤–µ–∫—Ç–æ—Ä–Ω—ã–π)
- ‚úÖ **–ù–∞–¥–µ–∂–Ω—ã–µ fallback-–º–µ—Ö–∞–Ω–∏–∑–º—ã**

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- ‚úÖ **Backend:** FastAPI (Python 3.11)
- ‚úÖ **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL + pgvector, Elasticsearch, Qdrant, Redis
- ‚úÖ **AI:** LangChain, LangGraph, Mem0, FlashrankRerank
- ‚úÖ **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** Docker Compose, Nginx

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚úÖ –ú–æ–∂–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ò–º–µ–µ—Ç –Ω–∞–¥–µ–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:
- **API endpoints:** 15+ —Ä–æ—É—Ç–µ—Ä–æ–≤
- **–°–µ—Ä–≤–∏—Å—ã:** 30+ —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:** 20+ —Å—É—â–Ω–æ—Å—Ç–µ–π
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** 4 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (PostgreSQL, Elasticsearch, Qdrant, Redis)
- **AI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** 5+ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (Ollama, Mistral, OpenAI, Anthropic, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏)

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2025-11-16  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω

