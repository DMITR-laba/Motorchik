# Автоматическая транслитерация с fallback на словарь

## Реализация

### Принцип работы
1. **Автоматическая транслитерация** - основной метод для кириллицы
2. **Словарь синонимов** - fallback для специальных случаев и популярных брендов

### Библиотеки
- `transliterate>=1.10.2` - приоритетная библиотека (точная транслитерация для русского)
- `unidecode>=1.3.7` - fallback библиотека (универсальная, но менее точная)

### Логика в `_normalize_query`

1. **Проверка кириллицы** - определяем, есть ли кириллические символы
2. **Автоматическая транслитерация** - если есть кириллица, транслитерируем весь запрос
3. **Словарь синонимов** - применяем для специальных случаев (приоритет)
4. **Комбинирование**:
   - Если словарь нашел замены → используем результат словаря
   - Если словарь не помог → используем автоматическую транслитерацию
   - В обоих случаях добавляем транслитерированный вариант как дополнительный вариант поиска

### Расширение вариантов поиска

В `generate_response`:
- Каждый вариант запроса проверяется на кириллицу
- Если есть кириллица → автоматически добавляется транслитерированный вариант
- Это позволяет искать и по "мазда", и по "mazda" одновременно

## Преимущества

✅ **Автоматически обрабатывает все бренды** - не нужно добавлять каждый вручную  
✅ **Словарь как fallback** - специальные случаи обрабатываются точно  
✅ **Двойной поиск** - ищет по оригиналу и транслитерации  
✅ **Гибкость** - работает даже если библиотека не установлена (использует только словарь)

## Установка

```bash
pip install transliterate>=1.10.2 unidecode>=1.3.7
```

Или через requirements.txt:
```bash
pip install -r requirements.txt
```

## Примеры

- "мазда" → автоматически → "mazda" (через transliterate)
- "тойота" → автоматически → "toyota" (через transliterate)
- "хёндай" → словарь → "hyundai" (специальный случай с ё)
- "бмв" → словарь → "bmw" (специальная аббревиатура)

После установки библиотек система автоматически транслитерирует все кириллические бренды!







