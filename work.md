# üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å –≥–ª–∞–≤–Ω—ã–º –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–∞–Ω–∞–ª–∏–∑-—Ç–µ–∫—É—â–µ–π-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏](#—Ü–µ–ª–∏-–∏-–∑–∞–¥–∞—á–∏)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
4. [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
5. [–≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è](#—ç—Ç–∞–ø—ã-–≤–Ω–µ–¥—Ä–µ–Ω–∏—è)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏-—Å–µ—Ä–≤–∏—Å–∞–º–∏)
7. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è](#—Ä–∏—Å–∫–∏-–∏-–º–∏—Ç–∏–≥–∞—Ü–∏—è)

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π pgvector
- **Elasticsearch** - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ (—Å fallback –Ω–∞ in-memory)

#### API Endpoints (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
- `/api/chat/message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
- `/api/search/es/cars` - –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —á–µ—Ä–µ–∑ Elasticsearch
- `/api/cars/` - —Ä–∞–±–æ—Ç–∞ —Å –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏ (CRUD)
- `/api/ai/sql-agent/query` - SQL-–∞–≥–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL
- `/api/ai/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI –º–æ–¥–µ–ª–µ–π
- `/api/parser/*` - –ø–∞—Ä—Å–∏–Ω–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `/api/import/*` - –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- `/api/documents/*` - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- `/api/voice/*` - –≥–æ–ª–æ—Å–æ–≤–æ–π API
- `/api/domain/*` - –¥–æ–º–µ–Ω–Ω—ã–π API

#### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `Car` - –Ω–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ (cars)
- `UsedCar` - –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ (used_cars)
- `CarOption`, `CarOptionsGroup` - –æ–ø—Ü–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `Chat`, `ChatMessage` - —á–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- `Article`, `Document` - —Å—Ç–∞—Ç—å–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `User` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **ElasticsearchService** (`backend/services/elasticsearch_service.py`)
- ‚úÖ –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fuzzy search
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–Ω–µ, –≥–æ–¥—É, –ø—Ä–æ–±–µ–≥—É, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### 2. **LangChainLLMService** (`backend/services/langchain_llm_service.py`)
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM (Ollama, Mistral, OpenAI, Anthropic)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏
- ‚ùå –ù–µ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### 3. **QueryAnalyzerService** (`backend/services/query_analyzer_service.py`)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ (vague/specific/mixed)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ä–∞—Å–ø–ª—ã–≤—á–∞—Ç—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å
- ‚ùå –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

#### 4. **SQLAgentService** (`backend/services/sql_agent_service.py`)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º
- ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å SQL, –Ω–µ —Å Elasticsearch

#### 5. **AIService** (`backend/services/ai_service.py`)
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å Ollama API
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π
- ‚ùå –ù–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π

#### 6. **RAGService** (`backend/services/rag_service.py`)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RAG
- ‚úÖ –ü–æ–∏—Å–∫ –≤ —Å—Ç–∞—Ç—å—è—Ö –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Elasticsearch –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DialogStateService –∏ DialogCommandProcessor
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è, —Å–∏–Ω–æ–Ω–∏–º—ã)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

#### 7. **DialogStateService** (`backend/services/dialog_state_service.py`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞ —á–µ—Ä–µ–∑ Redis
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø–æ–∏—Å–∫–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏–º –≤–æ–ø—Ä–æ—Å–æ–º
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
- ‚ùå –ù–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

#### 8. **DialogCommandProcessor** (`backend/services/dialog_command_processor.py`)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–∏–∞–ª–æ–≥–∞ (—Å—Ç–∞—Ä—Ç, —Å–±—Ä–æ—Å, –ø–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

#### 9. **SQLAgentService** (`backend/services/sql_agent_service.py`)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL
- ‚úÖ Fallback –Ω–∞ Elasticsearch –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ SQL
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

#### 10. **DatabaseService** (`backend/services/database_service.py`)
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å PostgreSQL
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π, –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, —á–∞—Ç–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –æ–ø—Ü–∏—è–º–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —á–∞—Ç–∞–º–∏

#### 11. **DocumentService** (`backend/services/document_service.py`)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF, DOC, DOCX
- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

#### 12. **ElasticsearchService** (`backend/services/elasticsearch_service.py`)
- ‚úÖ –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ Fuzzy search
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (cars, used_cars)
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚ùå –ù–µ—Ç –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ä–æ–∫/–∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### 13. **Redis** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —á–∞—Ç–∞
- ‚úÖ Fallback –Ω–∞ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

### –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - –Ω–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–±–æ—Ä–æ–º –º–æ–¥–µ–ª–µ–π
2. **–ñ–µ—Å—Ç–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞** - –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫ –Ω–µ –æ—Å–ª–∞–±–ª—è–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏–∏
3. **–ù–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç "—Ö–æ—Ä–æ—à–∏–π —Å–µ–º–µ–π–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å"
4. **–†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** - –∫–∞–∂–¥–∞—è —Å–ª—É–∂–±–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
5. **–ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π** - –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
6. **RAGService –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä** - –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞
7. **DialogStateService –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –ø–æ–∏—Å–∫–æ–º** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
8. **DialogCommandProcessor –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
9. **–ù–µ—Ç –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º** - DialogStateService –∏ DialogueHistoryService —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
10. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM** - —Ç–æ–ª—å–∫–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

---

## üéØ –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏
1. **–°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π** –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ API –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –ó–∞–¥–∞—á–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `AIModelOrchestratorService` - –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å `IntelligentSearchService` - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º
- [ ] –°–æ–∑–¥–∞—Ç—å `FuzzyQueryInterpreter` - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `RecommendationService` - —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `CarSearchAnalyzerService` - –∞–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `CarQueryGeneratorService` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `CarResultProcessorService` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `FinanceCalculatorService` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `CarDealerDatabaseManagerService` - –º–µ–Ω–µ–¥–∂–µ—Ä –ë–î
- [ ] –°–æ–∑–¥–∞—Ç—å `DialogueHistoryService` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `RelationAnalyzerService` - –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `ContextManagerService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- [ ] –°–æ–∑–¥–∞—Ç—å `MemoryManagerService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- [ ] –°–æ–∑–¥–∞—Ç—å `EmotionAnalyzerService` - –∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `ProactiveAssistantService` - –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `QualityMetricsService` - –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `KnowledgeIntegratorService` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `DialogueVisualizerService` - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `CarDealerAssistantService` - –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `ElasticsearchService`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `LangChainLLMService`
- [ ] –î–æ–±–∞–≤–∏—Ç—å API endpoints –≤ `ai.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ì–ª–∞–≤–Ω—ã–π –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä                            ‚îÇ
‚îÇ              (AIModelOrchestratorService)                            ‚îÇ
‚îÇ  - –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏                               ‚îÇ
‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º –º–æ–¥–µ–ª–µ–π                                          ‚îÇ
‚îÇ  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ê–Ω–∞–ª–∏–∑      ‚îÇ   ‚îÇ  –ü–æ–∏—Å–∫        ‚îÇ   ‚îÇ  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è   ‚îÇ
‚îÇ  –∑–∞–ø—Ä–æ—Å–æ–≤    ‚îÇ   ‚îÇ  –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π  ‚îÇ   ‚îÇ  SQL         ‚îÇ
‚îÇ  –ú–æ–¥–µ–ª—å:     ‚îÇ   ‚îÇ  –ú–æ–¥–µ–ª—å:     ‚îÇ   ‚îÇ  –ú–æ–¥–µ–ª—å:     ‚îÇ
‚îÇ  llama3:8b   ‚îÇ   ‚îÇ  mixtral:8b   ‚îÇ   ‚îÇ  codellama   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ     CarDealerAssistantService              ‚îÇ
        ‚îÇ     (–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å)                       ‚îÇ
        ‚îÇ  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤                       ‚îÇ
        ‚îÇ  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤                  ‚îÇ
        ‚îÇ  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤               ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ  ‚îÇ   ‚îÇ  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç.  ‚îÇ   ‚îÇ  –§–∏–Ω–∞–Ω—Å—ã     ‚îÇ
‚îÇ  –¥–∏–∞–ª–æ–≥–æ–º    ‚îÇ   ‚îÇ  –ø–æ–∏—Å–∫        ‚îÇ   ‚îÇ              ‚îÇ
‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ
‚îÇ  - –ò—Å—Ç–æ—Ä–∏—è   ‚îÇ   ‚îÇ  - –û—Å–ª–∞–±–ª–µ–Ω–∏–µ‚îÇ   ‚îÇ  - –ö—Ä–µ–¥–∏—Ç—ã   ‚îÇ
‚îÇ  - –ö–æ–Ω—Ç–µ–∫—Å—Ç  ‚îÇ   ‚îÇ  - –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç.‚îÇ   ‚îÇ  - –õ–∏–∑–∏–Ω–≥    ‚îÇ
‚îÇ  - –≠–º–æ—Ü–∏–∏    ‚îÇ   ‚îÇ  - –†–µ–∫–æ–º–µ–Ω–¥. ‚îÇ   ‚îÇ  - –†–∞—Å—á–µ—Ç—ã   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   ElasticsearchService   ‚îÇ
              ‚îÇ   (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)         ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CarDealerAssistantService                      ‚îÇ
‚îÇ  (–ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ     ‚îÇ  ‚îÇ  –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ ‚îÇ  ‚îÇ  –§–∏–Ω–∞–Ω—Å—ã        ‚îÇ
‚îÇ  –¥–∏–∞–ª–æ–≥–æ–º       ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  DialogueHistory‚îÇ  ‚îÇ  CarSearchAnalyzer‚îÇ  ‚îÇ  FinanceCalculator‚îÇ
‚îÇ  RelationAnalyzer‚îÇ  ‚îÇ  IntelligentSearch‚îÇ  ‚îÇ  FinanceDatabase‚îÇ
‚îÇ  ContextManager ‚îÇ  ‚îÇ  FuzzyInterpreter‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  MemoryManager  ‚îÇ  ‚îÇ  Recommendation  ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  EmotionAnalyzer‚îÇ  ‚îÇ  QueryGenerator  ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ  ProactiveAssist‚îÇ  ‚îÇ  ResultProcessor ‚îÇ  ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  AIModelOrchestrator     ‚îÇ
              ‚îÇ  (–í—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π)         ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  LangChainLLMService     ‚îÇ
              ‚îÇ  (–†–∞–±–æ—Ç–∞ —Å LLM)         ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  ElasticsearchService    ‚îÇ
              ‚îÇ  (–ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π)    ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. **AIModelOrchestratorService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Ollama –º–æ–¥–µ–ª–µ–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π
- Fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –£—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –Ω–∞–∑–Ω–∞—á–∏–ª –º–æ–¥–µ–ª—å)

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class AIModelOrchestratorService:
    async def select_model_for_task(
        task_type: TaskType,
        task_complexity: Complexity,
        user_override: Optional[str] = None
    ) -> str  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "ollama:model_name"
    
    async def get_model_performance(model_name: str) -> Dict
    async def register_model_usage(model_name: str, task_type: TaskType, success: bool)
```

**–¢–∏–ø—ã –∑–∞–¥–∞—á**:
- `QUERY_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ (–ª–µ–≥–∫–∞—è –º–æ–¥–µ–ª—å: llama3:8b)
- `FUZZY_INTERPRETATION` - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)
- `FILTER_RELAXATION` - –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)
- `RECOMMENDATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (—Ç—è–∂–µ–ª–∞—è: llama3:70b –∏–ª–∏ mistral-large)
- `SQL_GENERATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è: codellama:34b)
- `RESPONSE_GENERATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (—Å—Ä–µ–¥–Ω—è—è: llama3:8b)
- `SEARCH_INTENT_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è (–ª–µ–≥–∫–∞—è: llama3:8b)
- `QUERY_REFINEMENT` - —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞ (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)
- `RESULT_PROCESSING` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)
- `RELATION_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (–ª–µ–≥–∫–∞—è: llama3:8b)
- `EMOTION_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π (–ª–µ–≥–∫–∞—è: llama3:8b)
- `QUESTION_GENERATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)
- `ANSWER_GENERATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–ª–µ–≥–∫–∞—è: llama3:8b)
- `PROACTIVE_SUGGESTIONS` - –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (—Å—Ä–µ–¥–Ω—è—è: mixtral:8b)

#### 2. **IntelligentSearchService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –ü–µ—Ä–≤–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –í—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–∞
- –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ä–æ–∫/–∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class IntelligentSearchService:
    async def search_with_intelligence(
        initial_params: Dict[str, Any],
        user_query: str,
        dialogue_context: str = ""
    ) -> Dict[str, Any]
    
    async def _relax_filters(
        params: Dict,
        user_query: str,
        max_steps: int = 5
    ) -> Dict[str, Any]
    
    async def _choose_parameter_to_relax(
        params: Dict,
        user_query: str
    ) -> Optional[str]
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤**:
1. `color` - —Ü–≤–µ—Ç (—Å–∞–º—ã–π –≥–∏–±–∫–∏–π)
2. `features` - –æ–ø—Ü–∏–∏
3. `transmission` - –ö–ü–ü
4. `fuel_type` - —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞
5. `max_price` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (+20-30%)
6. `min_year` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥ (-1-3 –≥–æ–¥–∞)
7. `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∫—É–∑–æ–≤–∞
8. `brand` - –º–∞—Ä–∫–∞ (—Å–∞–º—ã–π —Å—Ç—Ä–æ–≥–∏–π)

#### 3. **FuzzyQueryInterpreter** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ ("—Ö–æ—Ä–æ—à–∏–π", "–Ω–∞–¥–µ–∂–Ω—ã–π", "—ç–∫–æ–Ω–æ–º–∏—á–Ω—ã–π")
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class FuzzyQueryInterpreter:
    async def interpret_fuzzy_query(
        user_query: str,
        dialogue_context: str,
        available_brands: List[str],
        available_categories: List[str]
    ) -> Dict[str, Any]
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    # {
    #     "interpreted_parameters": {...},
    #     "confidence": 0.85,
    #     "reasoning": "...",
    #     "clarification_questions": [...]
    # }
```

**–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏**:
- "—Ö–æ—Ä–æ—à–∏–π —Å–µ–º–µ–π–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å" ‚Üí `{"category": "–≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", "max_price": 2500000, "keywords": "–≤–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π"}`
- "—ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è –º–∞—à–∏–Ω–∞ –¥–ª—è –≥–æ—Ä–æ–¥–∞" ‚Üí `{"fuel_type": "–±–µ–Ω–∑–∏–Ω", "engine_volume": 1.6, "keywords": "—ç–∫–æ–Ω–æ–º–∏—á–Ω—ã–π"}`
- "–ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Å–µ–¥–∞–Ω" ‚Üí `{"category": "—Å–µ–¥–∞–Ω", "min_price": 3000000, "keywords": "–ø—Ä–µ–º–∏—É–º, –∫–æ–º—Ñ–æ—Ä—Ç"}`

#### 4. **RecommendationService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class RecommendationService:
    async def generate_recommendations(
        initial_params: Dict,
        user_query: str,
        available_cars: List[Dict]
    ) -> Dict[str, Any]
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    # {
    #     "analysis": "...",
    #     "recommendations": [...],
    #     "closest_matches": [...]
    # }
```

#### 5. **EnhancedElasticsearchService** (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ ElasticsearchService –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `search_with_relaxation()` - –ø–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `find_similar_brands()` - –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ä–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `find_similar_categories()` - –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `IntelligentSearchService`

#### 6. **CarSearchAnalyzerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ê–Ω–∞–ª–∏–∑ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class CarSearchAnalyzerService:
    async def analyze_search_intent(
        user_query: str,
        dialogue_history: str,
        current_topic: str,
        available_categories: List[str]
    ) -> Dict[str, Any]
    
    def should_perform_search(search_intent: Dict[str, Any]) -> bool
```

#### 7. **CarQueryGeneratorService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class CarQueryGeneratorService:
    async def refine_search_parameters(
        initial_params: Dict,
        dialogue_history: str,
        missing_info: List[str] = None,
        available_brands: List[str] = None,
        available_categories: List[str] = None
    ) -> Dict[str, Any]
    
    def identify_missing_parameters(
        search_type: str,
        current_params: Dict
    ) -> List[str]
```

#### 8. **CarResultProcessorService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–¥–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —É—Ç–æ—á–Ω–µ–Ω–∏—é
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class CarResultProcessorService:
    async def process_search_results(
        search_results: Dict,
        user_query: str
    ) -> Dict[str, Any]
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    # {
    #     "success": True,
    #     "results_summary": {
    #         "summary": "...",
    #         "top_recommendations": [...],
    #         "suggested_refinements": [...],
    #         "next_questions": [...],
    #         "finance_options": "..."
    #     },
    #     "raw_results": [...],
    #     "total_found": 5
    # }
```

#### 9. **FinanceCalculatorService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∫—Ä–µ–¥–∏—Ç—ã, –ª–∏–∑–∏–Ω–≥)

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫—Ä–µ–¥–∏—Ç–∞ (–µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂, –æ–±—â–∞—è —Å—É–º–º–∞)
- –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ª–∏–∑–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class FinanceCalculatorService:
    def calculate_loan(
        car_price: float,
        down_payment: float,
        interest_rate: float,
        loan_term: int
    ) -> Dict[str, Any]
    
    def calculate_lease(
        car_price: float,
        residual_value: float,
        lease_term: int
    ) -> Dict[str, Any]
```

#### 10. **CarDealerDatabaseManagerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ElasticsearchService)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (FinanceDatabase)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä–æ–∫ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class CarDealerDatabaseManagerService:
    def search(
        domain: str,
        parameters: Dict[str, Any]
    ) -> Dict[str, Any]
    
    def get_available_brands() -> List[str]
    def get_available_categories() -> List[str]
    def calculate_finance_for_car(
        car_price: float,
        down_payment_percent: float = 20,
        loan_term: int = 60
    ) -> Dict[str, Any]
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: 
- –ë–∞–∑–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `ElasticsearchService`
- –ë–∞–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ PostgreSQL –∏–ª–∏ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç: –±–∞–Ω–∫–∏, –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏, —É—Å–ª–æ–≤–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è

#### 11. **DialogueHistoryService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º—ã –∑–∞–ø—Ä–æ—Å–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (recent, topic, summary)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–µ–º –¥–∏–∞–ª–æ–≥–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class DialogueHistoryService:
    def add_message(
        role: str,
        content: Any,
        questions_answers: List[Dict] = None,
        topic: str = None,
        emotion_data: Dict = None
    )
    
    def get_recent_context(max_messages: int = 6) -> str
    def get_topic_context(topic: str = None) -> str
    def get_summary_context() -> str
    def detect_topic(query: str) -> str
    def get_already_covered_topics() -> List[str]
```

#### 12. **RelationAnalyzerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –¥–∏–∞–ª–æ–≥–æ–º
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–≤—è–∑–∏ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ, —É—Ç–æ—á–Ω–µ–Ω–∏–µ, –Ω–æ–≤–∞—è —Ç–µ–º–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã)
- –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class RelationAnalyzerService:
    async def analyze_relation(
        current_query: str,
        dialogue_history: str,
        previous_topics: List[str]
    ) -> Tuple[bool, str, float]
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: (is_related, relation_type, confidence)
```

#### 13. **ContextManagerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–§—É–Ω–∫—Ü–∏–∏**:
- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å–≤—è–∑–∏
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π (recent, topic, summary)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≥–ª—É–±–∏–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class ContextManagerService:
    def get_context_strategy(
        relation_type: str,
        confidence: float
    ) -> Dict
    
    def prepare_context(
        history: DialogueHistoryService,
        strategy: Dict,
        current_topic: str
    ) -> Dict[str, str]
```

#### 14. **MemoryManagerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–∞—Å—á–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –¥–∏–∞–ª–æ–≥–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class MemoryManagerService:
    def calculate_message_importance(message: Dict) -> float
    def compress_history(history: List[Dict]) -> List[Dict]
```

#### 15. **EmotionAnalyzerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–∫—Ä–∞—Å–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è, –Ω–µ–≥–∞—Ç–∏–≤–Ω–∞—è, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–æ–Ω–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class EmotionAnalyzerService:
    async def analyze_emotion(query: str) -> Dict[str, Any]
    
    def adjust_tone_for_questions(
        questions: List[str],
        emotion_data: Dict,
        question_style: str = "neutral"
    ) -> List[str]
```

#### 16. **ProactiveAssistantService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ—Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ —Ç–µ–º—ã

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class ProactiveAssistantService:
    async def generate_proactive_suggestions(
        history: DialogueHistoryService,
        current_topic: str,
        user_interests: List[str]
    ) -> List[Dict]
```

#### 17. **QualityMetricsService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

**–§—É–Ω–∫—Ü–∏–∏**:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class QualityMetricsService:
    def log_interaction(
        relation_data: Dict,
        questions: List[str],
        response_time: float
    )
    
    def get_performance_summary() -> Dict
```

#### 18. **KnowledgeIntegratorService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–Ω–∞–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–±–æ–≥–∞—â–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–º–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –ø–æ —Ç–µ–º–µ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π –æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class KnowledgeIntegratorService:
    def enrich_with_knowledge(
        questions: List[str],
        topic: str,
        relation_type: str
    ) -> List[str]
```

#### 19. **DialogueVisualizerService** (–Ω–æ–≤—ã–π)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –¥–∏–∞–ª–æ–≥–∞ —Å —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –¥–∏–∞–ª–æ–≥–∞
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–π–º–ª–∞–π–Ω–∞ –¥–∏–∞–ª–æ–≥–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class DialogueVisualizerService:
    def create_dialogue_map(
        history: DialogueHistoryService
    ) -> Dict
    
    def print_conversation_analysis(agent: CarDealerAssistantService)
```

#### 20. **CarDealerAssistantService** (–≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```python
class CarDealerAssistantService:
    async def process_query(user_query: str) -> Dict[str, Any]
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    # {
    #     "user_query": "...",
    #     "query_topic": "...",
    #     "is_related": True,
    #     "relation_type": "continuation",
    #     "search_performed": True,
    #     "search_results": {...},
    #     "clarifying_questions": [...],
    #     "response_time": 2.5
    # }
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥–æ–±–∞–≤–∏—Ç—å –≤ `requirements.txt`)

```txt
# –£–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ:
langchain>=0.1.0
langchain-community>=0.0.20
langchain-core>=0.1.0
langchain-ollama>=0.1.0

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã):
# pydantic>=2.5.0  # —É–∂–µ –µ—Å—Ç—å
# typing-extensions>=4.8.0  # –æ–±—ã—á–Ω–æ –≤—Ö–æ–¥–∏—Ç –≤ Python 3.8+
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```
IntelligentSearchService
    ‚îú‚îÄ‚îÄ ElasticsearchService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îú‚îÄ‚îÄ FuzzyQueryInterpreter (–Ω–æ–≤—ã–π)
    ‚îú‚îÄ‚îÄ RecommendationService (–Ω–æ–≤—ã–π)
    ‚îî‚îÄ‚îÄ DialogStateService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

FuzzyQueryInterpreter
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îî‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

RecommendationService
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îî‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

AIModelOrchestratorService
    ‚îú‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    ‚îú‚îÄ‚îÄ AIService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π
    ‚îî‚îÄ‚îÄ OllamaUtils (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama

CarDealerAssistantService
    ‚îú‚îÄ‚îÄ RAGService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
    ‚îú‚îÄ‚îÄ DialogStateService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
    ‚îú‚îÄ‚îÄ DialogCommandProcessor (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
    ‚îú‚îÄ‚îÄ IntelligentSearchService (–Ω–æ–≤—ã–π)
    ‚îú‚îÄ‚îÄ DatabaseService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
    ‚îî‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)

CarSearchAnalyzerService
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îî‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

CarQueryGeneratorService
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îú‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    ‚îî‚îÄ‚îÄ DialogStateService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

CarResultProcessorService
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π)
    ‚îî‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

DialogueHistoryService
    ‚îú‚îÄ‚îÄ Redis (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
    ‚îî‚îÄ‚îÄ LangChainLLMService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º—ã

SQLAgentService (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    ‚îú‚îÄ‚îÄ IntelligentSearchService (–Ω–æ–≤—ã–π) - –¥–ª—è fallback
    ‚îî‚îÄ‚îÄ ElasticsearchService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è fallback

RAGService (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
    ‚îú‚îÄ‚îÄ AIModelOrchestratorService (–Ω–æ–≤—ã–π) - –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
    ‚îú‚îÄ‚îÄ IntelligentSearchService (–Ω–æ–≤—ã–π) - –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    ‚îú‚îÄ‚îÄ DialogStateService (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
    ‚îî‚îÄ‚îÄ DialogCommandProcessor (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
```

---

## üó∫Ô∏è –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ù–µ–¥–µ–ª—è 1)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `AIModelOrchestratorService`**
   - –§–∞–π–ª: `backend/services/ai_model_orchestrator_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `ollama_utils.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama
   - –£—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥–µ–ª–µ–π –∏–∑ `ai_settings.json`

2. **–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–µ–π**
   - –§–∞–π–ª: `backend/ai_model_config.json`
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞—á –∏ –º–æ–¥–µ–ª–µ–π
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ `ai_settings.json`

3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `LangChainLLMService`**
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `LangChainLLMService` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM

4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏**
   - –û–±–Ω–æ–≤–∏—Ç—å `RAGService` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –û–±–Ω–æ–≤–∏—Ç—å `SQLAgentService` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –û–±–Ω–æ–≤–∏—Ç—å `QueryAnalyzerService` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

5. **–î–æ–±–∞–≤–∏—Ç—å API endpoints**
   - `GET /api/ai/orchestrator/models` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –∑–∞–¥–∞—á
   - `POST /api/ai/orchestrator/select` - —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏
   - `GET /api/ai/orchestrator/performance` - –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChainLLMService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ollama —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–ù–µ–¥–µ–ª—è 2)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `FuzzyQueryInterpreter`**
   - –§–∞–π–ª: `backend/services/fuzzy_query_interpreter.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
   - –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `_extract_filters_from_text()`

2. **–£–ª—É—á—à–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å `_extract_filters_from_text()` –≤ `search_es.py`
   - –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏

3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `QueryAnalyzerService`**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `FuzzyQueryInterpreter`

4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `DialogCommandProcessor`**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `FuzzyQueryInterpreter` –¥–ª—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

5. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏**
   - –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏ –≤ `RAGService`

6. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
   - –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- ‚úÖ –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å QueryAnalyzerService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DialogCommandProcessor —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–ù–µ–¥–µ–ª—è 3-4)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `IntelligentSearchService`**
   - –§–∞–π–ª: `backend/services/intelligent_search_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π –ø–æ–∏—Å–∫
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `_relax_filters_for_alternatives()` –∏–∑ `ai.py`

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å `ElasticsearchService`**
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ä–æ–∫/–∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Å–ª–∞–±–ª–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ `search_cars()` –∫–∞–∫ –æ—Å–Ω–æ–≤—É

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ—Å–ª–∞–±–ª–µ–Ω–∏—è**
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
   - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Ü–µ–Ω–∞, –≥–æ–¥)
   - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–º–∞—Ä–∫–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –∏–∑ `ai.py`

4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `DialogStateService`**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - –£—á–∏—Ç—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –∞–Ω–∞–ª–∏–∑–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è

6. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `SQLAgentService`**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –ø—Ä–∏ fallback –Ω–∞ Elasticsearch
   - –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –ü–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –ª–æ–≥–∏—á–µ–Ω
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ä–æ–∫/–∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ElasticsearchService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DialogStateService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQLAgentService —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 4: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–ù–µ–¥–µ–ª—è 5)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `RecommendationService`**
   - –§–∞–π–ª: `backend/services/recommendation_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `IntelligentSearchService`**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ—Å–ª–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è

3. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
   - –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IntelligentSearchService —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 5: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º (–ù–µ–¥–µ–ª—è 6)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `DialogueHistoryService`**
   - –§–∞–π–ª: `backend/services/dialogue_history_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º—ã
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Redis**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏ `chat:history:{user_id}:{session_id}`
   - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `_get_chat_history()` –∏ `_current_session_id()` –∏–∑ `chat.py`

2. **–°–æ–∑–¥–∞—Ç—å `RelationAnalyzerService`**
   - –§–∞–π–ª: `backend/services/relation_analyzer_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–≤—è–∑–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑ Redis

3. **–°–æ–∑–¥–∞—Ç—å `ContextManagerService`**
   - –§–∞–π–ª: `backend/services/context_manager_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogueHistoryService` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

4. **–°–æ–∑–¥–∞—Ç—å `MemoryManagerService`**
   - –§–∞–π–ª: `backend/services/memory_manager_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–º –∏—Å—Ç–æ—Ä–∏–∏

5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `DialogStateService`**
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å `DialogStateService` –∏ `DialogueHistoryService`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏ Redis
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∂–∞—Ç–∏–µ –ø–∞–º—è—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Redis —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

### –≠—Ç–∞–ø 6: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–ù–µ–¥–µ–ª—è 7)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `EmotionAnalyzerService`**
   - –§–∞–π–ª: `backend/services/emotion_analyzer_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏—é —Ç–æ–Ω–∞

2. **–°–æ–∑–¥–∞—Ç—å `ProactiveAssistantService`**
   - –§–∞–π–ª: `backend/services/proactive_assistant_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤

3. **–°–æ–∑–¥–∞—Ç—å `QualityMetricsService`**
   - –§–∞–π–ª: `backend/services/quality_metrics_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **–°–æ–∑–¥–∞—Ç—å `KnowledgeIntegratorService`**
   - –§–∞–π–ª: `backend/services/knowledge_integrator_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞

5. **–°–æ–∑–¥–∞—Ç—å `DialogueVisualizerService`**
   - –§–∞–π–ª: `backend/services/dialogue_visualizer_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–∏–∞–ª–æ–≥–∞
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 7: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ù–µ–¥–µ–ª—è 8)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `FinanceCalculatorService`**
   - –§–∞–π–ª: `backend/services/finance_calculator_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç –ª–∏–∑–∏–Ω–≥–∞

2. **–°–æ–∑–¥–∞—Ç—å `CarDealerDatabaseManagerService`**
   - –§–∞–π–ª: `backend/services/car_dealer_database_manager.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏

3. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î
   - –î–æ–±–∞–≤–∏—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–∏—Å–∫–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–∞–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### –≠—Ç–∞–ø 8: –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 9)

#### –ó–∞–¥–∞—á–∏:
1. **–°–æ–∑–¥–∞—Ç—å `CarDealerAssistantService`**
   - –§–∞–π–ª: `backend/services/car_dealer_assistant_service.py`
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
   - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RAGService`**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `RAGService` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
   - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService`**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
   - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogCommandProcessor`**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∫–æ–º–∞–Ω–¥

2. **–°–æ–∑–¥–∞—Ç—å `CarSearchAnalyzerService`**
   - –§–∞–π–ª: `backend/services/car_search_analyzer_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `QueryAnalyzerService`

3. **–°–æ–∑–¥–∞—Ç—å `CarQueryGeneratorService`**
   - –§–∞–π–ª: `backend/services/car_query_generator_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DialogStateService` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

4. **–°–æ–∑–¥–∞—Ç—å `CarResultProcessorService`**
   - –§–∞–π–ª: `backend/services/car_result_processor_service.py`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –†–∞–±–æ—Ç–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ `Car` –∏ `UsedCar` –∏–∑ –ë–î

5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `RAGService`**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –≤ `RAGService.generate_response()`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RAGService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DialogStateService —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

---

### –≠—Ç–∞–ø 9: API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 10)

#### –ó–∞–¥–∞—á–∏:
1. **–î–æ–±–∞–≤–∏—Ç—å API endpoints –≤ `ai.py`**
   - `POST /api/ai/intelligent-search` - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
   - `POST /api/ai/interpret-query` - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
   - `POST /api/ai/recommendations` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - `POST /api/ai/car-dealer/query` - –≥–ª–∞–≤–Ω—ã–π endpoint –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - `POST /api/ai/finance/calculate` - —Ä–∞—Å—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è
   - `GET /api/ai/dialogue/history` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
   - `GET /api/ai/dialogue/visualization` - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞

2. **–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints –≤ `chat.py`**
   - –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_intelligent_search: bool = False` –≤ `ChatMessageRequest`
   - –ü—Ä–∏ `use_intelligent_search=True` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –≤ `RAGService`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarDealerAssistantService` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

3. **–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints –≤ `search_es.py`**
   - –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_intelligent_search: bool = False` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `GET /api/search/es/cars`
   - –ü—Ä–∏ `use_intelligent_search=True` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService`
   - –£–ª—É—á—à–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é LLM
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

4. **–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints –≤ `cars.py`**
   - –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

5. **–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint –≤ `ai.py`**
   - `POST /api/ai/sql-agent/query` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –ø—Ä–∏ fallback –Ω–∞ Elasticsearch
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL-–∞–≥–µ–Ω—Ç–∞

6. **–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**
   - `backend/intelligent_search_config.json`
   - `backend/car_dealer_config.json`
   - –û–±–Ω–æ–≤–∏—Ç—å `ai_model_config.json`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `ai_settings.json`

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ endpoints —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

### –≠—Ç–∞–ø 10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 11-12)

#### –ó–∞–¥–∞—á–∏:
1. **–ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

2. **–ù–∞–ø–∏—Å–∞—Ç—å integration-—Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–æ–∏—Å–∫–∞
   - –¢–µ—Å—Ç—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

3. **–ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `ElasticsearchService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `ElasticsearchService`**:
```python
# –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã:
async def find_similar_brands(self, brand: str, limit: int = 5) -> List[str]
async def find_similar_categories(self, category: str, limit: int = 5) -> List[str]
async def search_with_relaxation(self, params: Dict, relaxation_steps: int = 0) -> Dict
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- `IntelligentSearchService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ElasticsearchService` –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ü—Ä–∏ –æ—Å–ª–∞–±–ª–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –º–µ—Ç–æ–¥–∞ `search_cars()` –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 1.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è**: `_extract_filters_from_text()` –≤ `backend/app/api/search_es.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é LLM
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- `IntelligentSearchService` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- `FuzzyQueryInterpreter` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `LangChainLLMService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `LangChainLLMService` –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `AIModelOrchestratorService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `LangChainLLMService` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è LLM
- –í—Å–µ –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `LangChainLLMService`

**–í–∞–∂–Ω–æ**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `QueryAnalyzerService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –†–∞—Å—à–∏—Ä–∏—Ç—å `QueryAnalyzerService` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `interpret_fuzzy_query()` –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `FuzzyQueryInterpreter`
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### 3.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RAGService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `RAGService` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AIModelOrchestratorService` –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `IntelligentSearchService` –≤ `RAGService.generate_response()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FuzzyQueryInterpreter` –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –≤ `RAGService` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService`
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `IntelligentSearchService` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DialogStateService` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –ü—Ä–∏ –æ—Å–ª–∞–±–ª–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- `CarDealerAssistantService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `DialogStateService` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

### 3.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogCommandProcessor`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `IntelligentSearchService` –¥–ª—è –∫–æ–º–∞–Ω–¥ –ø–æ–∏—Å–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FuzzyQueryInterpreter` –¥–ª—è –∫–æ–º–∞–Ω–¥ —Å —Ä–∞–∑–º—ã—Ç—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- –ö–æ–º–∞–Ω–¥—ã –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `IntelligentSearchService`
- –ö–æ–º–∞–Ω–¥—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç `RecommendationService`
- –ö–æ–º–∞–Ω–¥—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç `CarQueryGeneratorService`

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `SQLAgentService`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `SQLAgentService` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ SQL-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- –ü—Ä–∏ fallback –Ω–∞ Elasticsearch –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL-–∞–≥–µ–Ω—Ç–∞

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- –ü—Ä–∏ –æ—à–∏–±–∫–µ SQL-–∞–≥–µ–Ω—Ç–∞ –∏–ª–∏ 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ Elasticsearch
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FuzzyQueryInterpreter` –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥ SQL-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL-–∞–≥–µ–Ω—Ç–∞

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ API endpoints

#### 5.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `chat.py` (API —á–∞—Ç–∞)

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints**:
- `POST /api/chat/message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_intelligent_search: bool = False` –≤ `ChatMessageRequest`
- –ü—Ä–∏ `use_intelligent_search=True` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –≤ `RAGService`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CarDealerAssistantService` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

#### 5.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `search_es.py` (API –ø–æ–∏—Å–∫–∞)

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints**:
- `GET /api/search/es/cars` - –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —á–µ—Ä–µ–∑ Elasticsearch

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_intelligent_search: bool = False` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–∏ `use_intelligent_search=True` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é LLM
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DialogStateService` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø–æ–∏—Å–∫–∞

#### 5.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `cars.py` (API –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π)

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints**:
- `GET /api/cars/` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `GET /api/cars/{car_id}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API (`ai.py`)

**–ù–æ–≤—ã–µ endpoints**:
```python
# –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
@router.post("/intelligent-search")
async def intelligent_search(request: IntelligentSearchRequest, db: Session = Depends(get_db))

@router.post("/interpret-query")
async def interpret_query(request: InterpretQueryRequest, db: Session = Depends(get_db))

@router.post("/recommendations")
async def get_recommendations(request: RecommendationsRequest, db: Session = Depends(get_db))

# –ì–ª–∞–≤–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞
@router.post("/car-dealer/query")
async def car_dealer_query(request: CarDealerQueryRequest, db: Session = Depends(get_db))

# –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
@router.post("/finance/calculate")
async def calculate_finance(request: FinanceCalculationRequest, db: Session = Depends(get_db))

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º
@router.get("/dialogue/history")
async def get_dialogue_history(session_id: str, db: Session = Depends(get_db))

@router.get("/dialogue/visualization")
async def get_dialogue_visualization(session_id: str, db: Session = Depends(get_db))

# –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–¥–µ–ª–µ–π
@router.get("/orchestrator/models")
async def get_orchestrator_models(db: Session = Depends(get_db))

@router.post("/orchestrator/select")
async def select_model_for_task(request: ModelSelectionRequest, db: Session = Depends(get_db))

@router.get("/orchestrator/performance")
async def get_orchestrator_performance(db: Session = Depends(get_db))
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö endpoints**:
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_intelligent_search: bool = False` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints –ø–æ–∏—Å–∫–∞
- –ü—Ä–∏ `use_intelligent_search=True` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService`
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `use_car_dealer_assistant: bool = False` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

### 6.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis

**–°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ (`chat:history:{user_id}:{session_id}`)
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ (`dialog:state:{user_id}`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (`chat:current:{user_id}`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- `DialogueHistoryService` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É Redis
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª—é—á–∞–º–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ fallback –Ω–∞ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- `CarDealerAssistantService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis —á–µ—Ä–µ–∑ `DialogueHistoryService`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π `_get_chat_history()` –∏ `_current_session_id()`

### 6.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ –ë–î

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏**:
- `Car` - –Ω–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- `UsedCar` - –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- `CarOption`, `CarOptionsGroup` - –æ–ø—Ü–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `Chat`, `ChatMessage` - —á–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- `Article`, `Document` - —Å—Ç–∞—Ç—å–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –í—Å–µ –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `DatabaseService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å—Ö–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
- `CarDealerDatabaseManagerService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `DatabaseService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- `CarResultProcessorService` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ `Car` –∏ `UsedCar`
- `FinanceCalculatorService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–µ `price` –∏–∑ –º–æ–¥–µ–ª–µ–π

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π (`backend/ai_model_config.json`)

```json
{
  "task_model_mapping": {
    "query_analysis": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "fuzzy_interpretation": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "filter_relaxation": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "recommendation": {
      "primary": "ollama:llama3:70b",
      "fallback": "ollama:mixtral:8b",
      "complexity": "heavy"
    },
    "sql_generation": {
      "primary": "ollama:codellama:34b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "response_generation": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "search_intent_analysis": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "query_refinement": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "result_processing": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "relation_analysis": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "emotion_analysis": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "question_generation": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    },
    "answer_generation": {
      "primary": "ollama:llama3:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "light"
    },
    "proactive_suggestions": {
      "primary": "ollama:mixtral:8b",
      "fallback": "ollama:llama3:8b",
      "complexity": "medium"
    }
  },
  "user_overrides": {
    "enabled": true,
    "respect_user_settings": true,
    "note": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
  },
  "performance_tracking": {
    "enabled": true,
    "cache_size": 100,
    "track_success_rate": true,
    "track_response_time": true
  },
  "model_availability_check": {
    "enabled": true,
    "check_interval_seconds": 300,
    "auto_fallback": true
  }
}
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (`backend/intelligent_search_config.json`)

```json
{
  "relaxation": {
    "enabled": true,
    "max_steps": 5,
    "priority": [
      "color",
      "features",
      "transmission",
      "fuel_type",
      "max_price",
      "min_year",
      "category",
      "brand"
    ],
    "rules": {
      "price": {
        "increase_percent": 20,
        "max_increase_percent": 50
      },
      "year": {
        "decrease_years": 2,
        "max_decrease_years": 5
      }
    }
  },
  "fuzzy_interpretation": {
    "enabled": true,
    "confidence_threshold": 0.7,
    "require_clarification_below": 0.5
  },
  "recommendations": {
    "enabled": true,
    "max_recommendations": 5,
    "min_similarity": 0.6
  }
}
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞ (`backend/car_dealer_config.json`)

```json
{
  "enabled": true,
  "auto_search_threshold": 0.7,
  "max_results": 5,
  "search_domains": [
    "–ª–µ–≥–∫–æ–≤—ã–µ",
    "–≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–∏",
    "–ø—Ä–µ–º–∏—É–º",
    "—ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏",
    "–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ"
  ],
  "enable_finance_calculations": true,
  "enable_trade_in": true,
  "enable_test_drive": true,
  "dialogue": {
    "max_history_length": 50,
    "enable_memory_compression": true,
    "enable_emotion_analysis": true,
    "enable_proactive_suggestions": true,
    "question_style": "friendly"
  },
  "context": {
    "recent": 6,
    "topic": 10,
    "session": 20,
    "summary": 3
  }
}
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `ai_settings.json`

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```json
{
  "intelligent_search": {
    "enabled": true,
    "use_orchestrator": true,
    "auto_relax_filters": true
  },
  "car_dealer_assistant": {
    "enabled": true,
    "enable_finance": true,
    "enable_dialogue_management": true,
    "enable_emotion_analysis": true
  }
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã

#### 1. –¢–µ—Å—Ç—ã `AIModelOrchestratorService`
```python
# tests/test_ai_model_orchestrator.py
- test_select_model_for_task()
- test_fallback_on_error()
- test_user_override()
- test_performance_tracking()
```

#### 2. –¢–µ—Å—Ç—ã `FuzzyQueryInterpreter`
```python
# tests/test_fuzzy_query_interpreter.py
- test_interpret_family_car()
- test_interpret_economy_car()
- test_interpret_premium_car()
- test_low_confidence_clarification()
```

#### 3. –¢–µ—Å—Ç—ã `IntelligentSearchService`
```python
# tests/test_intelligent_search.py
- test_exact_match_search()
- test_filter_relaxation()
- test_parameter_selection()
- test_similar_brands()
```

#### 4. –¢–µ—Å—Ç—ã `RecommendationService`
```python
# tests/test_recommendation_service.py
- test_generate_recommendations()
- test_find_closest_matches()
- test_analyze_no_results()
```

### Integration-—Ç–µ—Å—Ç—ã

#### 1. –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
```python
# tests/test_integration.py
- test_intelligent_search_flow()
- test_fuzzy_query_to_results()
- test_relaxation_to_recommendations()
```

#### 2. –¢–µ—Å—Ç—ã API endpoints
```python
# tests/test_api_intelligent_search.py
- test_intelligent_search_endpoint()
- test_interpret_query_endpoint()
- test_recommendations_endpoint()
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
```
–ó–∞–ø—Ä–æ—Å: "BMW X5 2023 –≥–æ–¥–∞ –¥–æ 5 –º–ª–Ω"
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–π–¥–µ–Ω—ã —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –±–µ–∑ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º
```
–ó–∞–ø—Ä–æ—Å: "BMW X5 2023 –≥–æ–¥–∞ –¥–æ 3 –º–ª–Ω"
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 
1. –ü–µ—Ä–≤–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ - –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
2. –û—Å–ª–∞–±–ª–µ–Ω–∏–µ max_price –¥–æ 3.6 –º–ª–Ω - –Ω–∞–π–¥–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–∑–º—ã—Ç—ã–π –∑–∞–ø—Ä–æ—Å
```
–ó–∞–ø—Ä–æ—Å: "—Ö–æ—Ä–æ—à–∏–π —Å–µ–º–µ–π–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å"
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
1. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. –ü–æ–∏—Å–∫ –ø–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
3. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```
–ó–∞–ø—Ä–æ—Å: "Mercedes S-Class 2024 –≥–æ–¥–∞ –¥–æ 2 –º–ª–Ω"
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
1. –ù–µ—Ç —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
2. –û—Å–ª–∞–±–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–º–æ–≥–ª–æ
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–¥—Ä—É–≥–∏–µ –º–∞—Ä–∫–∏, –¥—Ä—É–≥–∏–µ –≥–æ–¥—ã)
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å LLM –∑–∞–ø—Ä–æ—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ LLM –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –ø–æ–∏—Å–∫

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ LLM
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–≥–∫–∏—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–∏—Å–∫ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â—É—é –º–æ–¥–µ–ª—å

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- Fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π

### –†–∏—Å–∫ 3: –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É—Ö—É–¥—à–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Å–ª–∞–±–ª–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –º–æ–≥—É—Ç –≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —à–∞–≥–æ–≤ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–∞
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü–æ–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Å–ª–∞–±–ª–µ–Ω–∏–∏

### –†–∏—Å–∫ 4: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
**–û–ø–∏—Å–∞–Ω–∏–µ**: LLM –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –†–∏—Å–∫ 5: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö API endpoints
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∏—Å–∫ 6: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π Ollama
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- Fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–æ–¥–µ–ª–µ–π

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
backend/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ ai_model_orchestrator_service.py    # –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ intelligent_search_service.py        # –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ   ‚îú‚îÄ‚îÄ fuzzy_query_interpreter.py           # –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ recommendation_service.py            # –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ car_dealer_assistant_service.py      # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ)
‚îÇ   ‚îú‚îÄ‚îÄ car_search_analyzer_service.py       # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ car_query_generator_service.py       # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ car_result_processor_service.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ finance_calculator_service.py        # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ car_dealer_database_manager.py        # –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ dialogue_history_service.py          # –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ relation_analyzer_service.py         # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ context_manager_service.py           # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ memory_manager_service.py            # –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ emotion_analyzer_service.py          # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —ç–º–æ—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ proactive_assistant_service.py      # –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ quality_metrics_service.py           # –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ knowledge_integrator_service.py      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ dialogue_visualizer_service.py      # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ ai_model_config.json                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ intelligent_search_config.json       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ car_dealer_config.json              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_ai_model_orchestrator.py
‚îÇ   ‚îú‚îÄ‚îÄ test_intelligent_search.py
‚îÇ   ‚îú‚îÄ‚îÄ test_fuzzy_query_interpreter.py
‚îÇ   ‚îú‚îÄ‚îÄ test_recommendation_service.py
‚îÇ   ‚îú‚îÄ‚îÄ test_car_search_analyzer.py
‚îÇ   ‚îú‚îÄ‚îÄ test_finance_calculator.py
‚îÇ   ‚îú‚îÄ‚îÄ test_dialogue_history.py
‚îÇ   ‚îú‚îÄ‚îÄ test_relation_analyzer.py
‚îÇ   ‚îú‚îÄ‚îÄ test_emotion_analyzer.py
‚îÇ   ‚îî‚îÄ‚îÄ test_integration.py
‚îÇ
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ api/
        ‚îî‚îÄ‚îÄ ai.py                            # –û–±–Ω–æ–≤–∏—Ç—å —Å –Ω–æ–≤—ã–º–∏ endpoints
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö

```
backend/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ elasticsearch_service.py            # –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ query_analyzer_service.py           # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ langchain_llm_service.py            # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ rag_service.py                      # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å IntelligentSearchService
‚îÇ   ‚îú‚îÄ‚îÄ dialog_state_service.py            # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å IntelligentSearchService
‚îÇ   ‚îú‚îÄ‚îÄ dialog_command_processor.py        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ sql_agent_service.py               # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IntelligentSearchService –¥–ª—è fallback
‚îÇ
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ api/
        ‚îú‚îÄ‚îÄ ai.py                           # –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ endpoints
        ‚îú‚îÄ‚îÄ chat.py                         # –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é use_intelligent_search
        ‚îú‚îÄ‚îÄ search_es.py                    # –£–ª—É—á—à–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å LLM
        ‚îî‚îÄ‚îÄ cars.py                         # –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- ‚úÖ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∞–∂–µ –ø—Ä–∏ –∂–µ—Å—Ç–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ö
- ‚úÖ –†–∞–∑–º—ã—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å > 0.7)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ < 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM –Ω–∞ 50%+
- ‚úÖ –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ < 3 —à–∞–≥–æ–≤ –≤ 80% —Å–ª—É—á–∞–µ–≤

### –ö–∞—á–µ—Å—Ç–≤–æ
- ‚úÖ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ—Å–ª–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è > 70%
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ > 75%
- ‚úÖ –ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π > 60%

---

## üé≠ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ idea.md

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∫–ª–∏–µ–Ω—Ç–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `CarDealerAssistantService._initialize_question_chains()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–ø–æ—á–µ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤: `car_search`, `finance`
- –£—á–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–∏—Å–∫–∞, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä–æ–∫ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤**:
- "–ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç –≤—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ?"
- "–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ –æ–±—ã—á–Ω–æ –±—É–¥–µ—Ç –µ–∑–¥–∏—Ç—å –≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ?"
- "–í–∞–∂–Ω–∞ –ª–∏ —ç–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–ø–ª–∏–≤–∞?"

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `CarDealerAssistantService._initialize_answer_chain()` - —Ü–µ–ø–æ—á–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- –£—á–µ—Ç —Ç–∏–ø–∞ —Å–≤—è–∑–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 2 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ü–æ–º–æ–≥–∞–µ—Ç —Å–∏—Å—Ç–µ–º–µ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –≥–æ—Ç–æ–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### 3. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫—Ä–µ–¥–∏—Ç–∞ –∏ –ª–∏–∑–∏–Ω–≥–∞ –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

**–§—É–Ω–∫—Ü–∏–∏**:
- –†–∞—Å—á–µ—Ç –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –ø–æ –∫—Ä–µ–¥–∏—Ç—É
- –†–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—É–º–º—ã –≤—ã–ø–ª–∞—Ç
- –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ª–∏–∑–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –±–∞–Ω–∫–æ–≤

**–ë–∞–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π**:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–∞–Ω–∫–æ–≤
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (—Å–∫–∏–¥–∫–∏, –ª—å–≥–æ—Ç—ã)
- –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã FinanceDatabase**:
```python
credit_offers = [
    {
        "id": 1,
        "bank": "–°–±–µ—Ä–±–∞–Ω–∫",
        "rate": 8.5,
        "min_down_payment": 15,
        "max_period": 60,
        "special_conditions": "–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å –æ—Ç 15%"
    },
    # ... –¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
]
```

### 4. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞**: –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- **–ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –°–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∞–∂–Ω–æ–≥–æ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –£—á–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ç–æ—á–Ω–µ–Ω–∏–π
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞

### 5. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–æ–Ω–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- –≠–º–ø–∞—Ç–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —ç–º–æ—Ü–∏—è—Ö

**–ü—Ä–∏–º–µ—Ä—ã**:
- –ü—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–π —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏: "–ü–æ–Ω–∏–º–∞—é, –¥–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º —Ä–µ—à–µ–Ω–∏–µ..."
- –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Å—Ä–æ—á–Ω–æ—Å—Ç–∏: "–°—Ä–æ—á–Ω–æ: –ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç –≤—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ?"

### 6. –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é —Ç–µ–º—ã
- –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ—Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã**:
- "–ú–æ–∂–µ—Ç –±—ã—Ç—å, –≤–∞—Å —Ç–∞–∫–∂–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã trade-in?"
- "–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö –ø–æ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—é?"

### 7. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏–∞–ª–æ–≥–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –¥–∏–∞–ª–æ–≥–∞
- –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ–º–∞–º

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 8. –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –∏ –∞–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

**–ú–µ—Ç—Ä–∏–∫–∏**:
- –¢–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM

#### –ü—Ä–æ–º–ø—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–±–æ—Ä—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π —Ä–∞–∑–º—ã—Ç—ã–π –∑–∞–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞ 
–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞.

–î–û–°–¢–£–ü–ù–´–ï –ú–ê–†–ö–ò: {available_brands}
–î–û–°–¢–£–ü–ù–´–ï –ö–ê–¢–ï–ì–û–†–ò–ò: {available_categories}

–ó–ê–ü–†–û–° –ö–õ–ò–ï–ù–¢–ê: {user_query}

–†–∞—Å–ø–æ–∑–Ω–∞–π –≤ –∑–∞–ø—Ä–æ—Å–µ:
- –ë—é–¥–∂–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (–¥–µ—à–µ–≤—ã–π, –¥–æ—Ä–æ–≥–æ–π, —ç–∫–æ–Ω–æ–º-–∫–ª–∞—Å—Å, –ø—Ä–µ–º–∏—É–º)
- –¢–∏–ø –∞–≤—Ç–æ–º–æ–±–∏–ª—è (—Å–µ–º–µ–π–Ω—ã–π, –≥–æ—Ä–æ–¥—Å–∫–æ–π, –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π, –±–∏–∑–Ω–µ—Å-–∫–ª–∞—Å—Å)
- –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–≥–æ—Ä–æ–¥, —Ç—Ä–∞—Å—Å–∞, –±–µ–∑–¥–æ—Ä–æ–∂—å–µ)
- –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—ç–∫–æ–Ω–æ–º–∏—á–Ω—ã–π, –º–æ—â–Ω—ã–π, –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π)

–ü—Ä–µ–æ–±—Ä–∞–∑—É–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.

–û—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
{
    "interpreted_parameters": {
        "max_price": —á–∏—Å–ª–æ,
        "category": "–∫–∞—Ç–µ–≥–æ—Ä–∏—è",
        "fuel_type": "—Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞",
        "keywords": "–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞"
    },
    "confidence": 0.85,
    "reasoning": "–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏",
    "clarification_questions": ["–≤–æ–ø—Ä–æ—Å 1", "–≤–æ–ø—Ä–æ—Å 2"]
}
```

#### –ü—Ä–æ–º–ø—Ç –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
```
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è 
–º–æ–∂–Ω–æ –æ—Å–ª–∞–±–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –±–µ–∑ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –¥–ª—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∫–ª–∏–µ–Ω—Ç–∞.

–¢–ï–ö–£–©–ò–ï –ü–ê–†–ê–ú–ï–¢–†–´: {current_params}
–ó–ê–ü–†–û–° –ö–õ–ò–ï–ù–¢–ê: {user_query}
–ü–†–ò–û–†–ò–¢–ï–¢ –û–°–õ–ê–ë–õ–ï–ù–ò–Ø: {relaxation_priority}

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π:
1. –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (—è–≤–Ω–æ —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
2. –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —è–≤–ª—è—é—Ç—Å—è –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏
3. –í –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –æ—Å–ª–∞–±–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

–í–µ—Ä–Ω–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –∏–ª–∏ "none" –µ—Å–ª–∏ –æ—Å–ª–∞–±–ª—è—Ç—å –Ω–µ—á–µ–≥–æ.
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü—Ä–∏–º–µ—Ä 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```python
from services.ai_model_orchestrator_service import AIModelOrchestratorService

orchestrator = AIModelOrchestratorService()

# –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–∞
model = await orchestrator.select_model_for_task(
    task_type=TaskType.QUERY_ANALYSIS,
    task_complexity=Complexity.LIGHT
)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "ollama:llama3:8b"
```

#### –ü—Ä–∏–º–µ—Ä 2: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
```python
from services.intelligent_search_service import IntelligentSearchService
from services.elasticsearch_service import ElasticsearchService

search_service = IntelligentSearchService(ElasticsearchService())

result = await search_service.search_with_intelligence(
    initial_params={
        "brand": "BMW",
        "max_price": 3000000,
        "min_year": 2023
    },
    user_query="BMW X5 2023 –≥–æ–¥–∞ –¥–æ 3 –º–ª–Ω",
    dialogue_context=""
)

# –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–ª–∞–±–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã
```

#### –ü—Ä–∏–º–µ—Ä 3: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```python
from services.fuzzy_query_interpreter import FuzzyQueryInterpreter

interpreter = FuzzyQueryInterpreter()

result = await interpreter.interpret_fuzzy_query(
    user_query="—Ö–æ—Ä–æ—à–∏–π —Å–µ–º–µ–π–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å",
    dialogue_context="",
    available_brands=["Toyota", "BMW", "Mercedes"],
    available_categories=["—Å–µ–¥–∞–Ω", "–≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", "–∫—Ä–æ—Å—Å–æ–≤–µ—Ä"]
)

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

#### –ü—Ä–∏–º–µ—Ä 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
```python
from services.car_dealer_assistant_service import CarDealerAssistantService
from config.car_dealer_config import CarDealerConfig

config = CarDealerConfig(
    enabled=True,
    auto_search_threshold=0.7,
    enable_finance_calculations=True
)

assistant = CarDealerAssistantService(config)

result = await assistant.process_query("–•–æ—á—É –∫—É–ø–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å –¥–ª—è —Å–µ–º—å–∏")

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
# {
#     "user_query": "...",
#     "query_topic": "–∞–≤—Ç–æ–º–æ–±–∏–ª—å –¥–ª—è —Å–µ–º—å–∏",
#     "search_performed": True,
#     "search_results": {...},
#     "clarifying_questions": [
#         {
#             "question": "–ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç –≤—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ?",
#             "hypothetical_answers": ["–î–æ 2 –º–ª–Ω", "–û–∫–æ–ª–æ 3 –º–ª–Ω"]
#         }
#     ],
#     "response_time": 2.5
# }
```

#### –ü—Ä–∏–º–µ—Ä 5: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
```python
from services.finance_calculator_service import FinanceCalculatorService

calculator = FinanceCalculatorService()

# –†–∞—Å—á–µ—Ç –∫—Ä–µ–¥–∏—Ç–∞
loan_result = calculator.calculate_loan(
    car_price=2500000,
    down_payment=500000,
    interest_rate=9.0,
    loan_term=60
)

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
# {
#     "loan_amount": 2000000,
#     "monthly_payment": 41500.50,
#     "total_payment": 2490030.00,
#     "total_interest": 490030.00
# }
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- [ ] –≠—Ç–∞–ø 1: –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- [ ] –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
- [ ] –≠—Ç–∞–ø 4: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- [ ] –≠—Ç–∞–ø 5: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º
- [ ] –≠—Ç–∞–ø 6: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- [ ] –≠—Ç–∞–ø 7: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –≠—Ç–∞–ø 8: –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –≠—Ç–∞–ø 9: API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –≠—Ç–∞–ø 10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit-—Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Integration-—Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] README –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
2. –ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –£—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥–µ–ª–µ–π

**–ö–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏–∑ idea.md**:
> "–ù—É–∂–Ω–æ —á—Ç–æ–±—ã –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª—è–ª –≥–ª–∞–≤–Ω—ã–π –∏–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–∏—Ä–∞–ª –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–∏ –º–æ–¥–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π ollama –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—Ç–∞ –≥–¥–µ –æ–Ω —Ç—Ä–µ–±—É–µ—Ç—Å—è, **–∫—Ä–æ–º–µ –º–µ—Å—Ç –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∏–∏ –º–æ–¥–µ–ª—å**"

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∏–ª –º–æ–¥–µ–ª—å –¥–ª—è –∑–∞–¥–∞—á–∏ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω–∞
- –ï—Å–ª–∏ –Ω–µ—Ç - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `response_model` –∏–∑ `ai_settings.json` –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è `RESPONSE_GENERATION`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SQL-–∞–≥–µ–Ω—Ç–æ–º**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sql_model` –∏–∑ `sql_agent_settings.json` –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è `SQL_GENERATION`

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π**:
```json
{
  "user_model_overrides": {
    "sql_generation": "ollama:codellama:34b",  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∏–ª
    "response_generation": "ollama:llama3:8b"  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∏–ª
    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
  }
}
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫**:
1. `ai_settings.json` ‚Üí `response_model` ‚Üí –¥–ª—è `RESPONSE_GENERATION`
2. `sql_agent_settings.json` ‚Üí `sql_model` ‚Üí –¥–ª—è `SQL_GENERATION`
3. `ai_model_config.json` ‚Üí `user_model_overrides` ‚Üí –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
4. API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ `/api/ai/settings` ‚Üí –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

**–í–∞–∂–Ω–æ**: –í—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `ElasticsearchService` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `LangChainLLMService` —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ API
4. –ù–µ –Ω–∞—Ä—É—à–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
6. –†–∞–±–æ—Ç–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ –ë–î (`Car`, `UsedCar`, `Chat`, `ChatMessage`)
7. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `RAGService` –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã
8. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫–∞–∫ fallback
9. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `DialogStateService` –∏ `DialogCommandProcessor`
10. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `ai_settings.json` –∏ `sql_agent_settings.json`

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

#### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (`_extract_filters_from_text`)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

**–£–ª—É—á—à–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ fallback
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `FuzzyQueryInterpreter` –¥–ª—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### 2. –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (`_relax_filters_for_alternatives`)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è –≤ `ai.py`

**–£–ª—É—á—à–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `IntelligentSearchService` –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è –æ—Å–ª–∞–±–ª–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RecommendationService` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

#### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–∏–∞–ª–æ–≥–∞ (`DialogCommandProcessor`)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

**–£–ª—É—á—à–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `IntelligentSearchService` –¥–ª—è –∫–æ–º–∞–Ω–¥ –ø–æ–∏—Å–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FuzzyQueryInterpreter` –¥–ª—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∫–æ–º–∞–Ω–¥

#### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (`RAGService.generate_response`)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–£–ª—É—á—à–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `IntelligentSearchService` –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CarResultProcessorService` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

**–§–∞–∑–∞ 1 (–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - –æ—Å–Ω–æ–≤–∞ —Å–∏—Å—Ç–µ–º—ã)**:
1. AIModelOrchestratorService - –≥–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–¥–µ–ª–µ–π
2. IntelligentSearchService - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º
3. FuzzyQueryInterpreter - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–∞–∑–º—ã—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (RAGService, SQLAgentService)

**–§–∞–∑–∞ 2 (–í–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - —É–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π)**:
5. –£–ª—É—á—à–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (—Å LLM)
6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è IntelligentSearchService –≤ RAGService
7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è IntelligentSearchService –≤ SQLAgentService (fallback)
8. CarSearchAnalyzerService - –∞–Ω–∞–ª–∏–∑ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π
9. CarQueryGeneratorService - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
10. CarResultProcessorService - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–∞–∑–∞ 3 (–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º)**:
11. DialogueHistoryService - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis)
12. RelationAnalyzerService - –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
13. ContextManagerService - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
14. MemoryManagerService - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
15. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DialogStateService –∏ DialogCommandProcessor

**–§–∞–∑–∞ 4 (–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)**:
16. CarDealerAssistantService - –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å
17. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
18. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
19. API endpoints

**–§–∞–∑–∞ 5 (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)**:
20. FinanceCalculatorService - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
21. CarDealerDatabaseManagerService - –º–µ–Ω–µ–¥–∂–µ—Ä –ë–î
22. EmotionAnalyzerService - –∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π
23. ProactiveAssistantService - –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
24. QualityMetricsService - –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
25. DialogueVisualizerService - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞
26. KnowledgeIntegratorService - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –§—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã/—É–ª—É—á—à–µ–Ω—ã

#### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞
**–¢–µ–∫—É—â–µ–µ**: `_extract_filters_from_text()` –≤ `search_es.py` (—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è)
**–ù–æ–≤–æ–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä + —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ fallback
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Ñ—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

#### 2. –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
**–¢–µ–∫—É—â–µ–µ**: `_relax_filters_for_alternatives()` –≤ `ai.py` (–ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞)
**–ù–æ–≤–æ–µ**: `IntelligentSearchService` —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ LLM
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –§—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

#### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
**–¢–µ–∫—É—â–µ–µ**: `RAGService.generate_response()` —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é
**–ù–æ–≤–æ–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ + –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
**–¢–µ–∫—É—â–µ–µ**: `DialogCommandProcessor` –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
**–ù–æ–≤–æ–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

### –§—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- `DatabaseService` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- `ElasticsearchService` - –±–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ (—Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è, –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è)
- `DocumentService` - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- `ImportService`, `ParserService` - –∏–º–ø–æ—Ä—Ç –∏ –ø–∞—Ä—Å–∏–Ω–≥
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints (—Ä–∞—Å—à–∏—Ä—è—é—Ç—Å—è, –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è)
- –ú–æ–¥–µ–ª–∏ –ë–î (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å)

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ vs –Ω–æ–≤–æ–µ

| –§—É–Ω–∫—Ü–∏—è | –°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ | –ù–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
|---------|---------------------|---------------|------------|
| –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ LLM | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | AIModelOrchestratorService | –ó–∞–º–µ–Ω–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ | –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è | LLM + —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è | –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ | –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ | IntelligentSearchService | –ó–∞–º–µ–Ω–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ |
| –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | ElasticsearchService | IntelligentSearchService + ElasticsearchService | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º | DialogStateService (Redis) | DialogueHistoryService + DialogStateService | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ | DialogCommandProcessor (regex) | DialogCommandProcessor + LLM | –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ | RAGService (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å) | RAGService + –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| SQL-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è | SQLAgentService (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å) | SQLAgentService + –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –£–ª—É—á—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |
| –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ | Redis (chat:history) | DialogueHistoryService + Redis | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ |

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-XX  
**–í–µ—Ä—Å–∏—è**: 3.0  
**–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω –¥–æ–ø–æ–ª–Ω–µ–Ω –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏–∑ idea.md –∏ –∞–Ω–∞–ª–∏–∑–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

